"use strict";(self.webpackChunkmantis_material_react=self.webpackChunkmantis_material_react||[]).push([[1028],{855:(e,i,t)=>{t.d(i,{A:()=>l});var s=t(7208),n=t(92374),r=t(44414);function l(e){var i,t;let l,o,{children:d,type:a="scale",direction:c="right",offset:m=10,scale:h={hover:1.05,tap:.95}}=e;switch(c){case"up":case"left":l=m,o=0;break;default:l=0,o=m}const[u,x]=(0,s.Y)(l,o),[p,A]=(0,s.Y)(l,o);switch(a){case"rotate":return(0,r.jsx)(n.P.div,{animate:{rotate:360},transition:{repeat:1/0,repeatType:"loop",duration:2,repeatDelay:0},children:d});case"slide":return"up"===c||"down"===c?(0,r.jsx)(n.P.div,{animate:{y:void 0!==p?p:""},onHoverEnd:()=>A(),onHoverStart:()=>A(),children:d}):(0,r.jsx)(n.P.div,{animate:{x:void 0!==u?u:""},onHoverEnd:()=>x(),onHoverStart:()=>x(),children:d});default:return"number"===typeof h&&(h={hover:h,tap:h}),(0,r.jsx)(n.P.div,{whileHover:{scale:null===(i=h)||void 0===i?void 0:i.hover},whileTap:{scale:null===(t=h)||void 0===t?void 0:t.tap},children:d})}}},37322:(e,i,t)=>{t.d(i,{A:()=>h});var s=t(96583),n=t(28170),r=t(93230),l=t(82053),o=t(18216),d=t(46007),a=t(37476),c=t(36256),m=t(44414);function h(e){let{title:i,open:t,handleClose:h}=e;return(0,m.jsx)(s.A,{open:t,onClose:()=>h(!1),keepMounted:!0,TransitionComponent:a.s,maxWidth:"xs","aria-labelledby":"item-delete-title","aria-describedby":"item-delete-description",children:(0,m.jsx)(n.A,{sx:{mt:2,my:1},children:(0,m.jsxs)(r.A,{alignItems:"center",spacing:3.5,children:[(0,m.jsx)(d.A,{color:"error",sx:{width:72,height:72,fontSize:"1.75rem"},children:(0,m.jsx)(c.A,{})}),(0,m.jsxs)(r.A,{spacing:2,children:[(0,m.jsx)(l.A,{variant:"h4",align:"center",children:"Are you sure you want to delete?"}),(0,m.jsxs)(l.A,{align:"center",children:["By deleting",(0,m.jsxs)(l.A,{variant:"subtitle1",component:"span",children:[" ",'"',i,'"'," "]}),"task, Its details will also be deleted."]})]}),(0,m.jsxs)(r.A,{direction:"row",spacing:2,sx:{width:1},children:[(0,m.jsx)(o.A,{fullWidth:!0,onClick:()=>h(!1),color:"secondary",variant:"outlined",children:"Cancel"}),(0,m.jsx)(o.A,{fullWidth:!0,color:"error",variant:"contained",onClick:()=>h(!0),autoFocus:!0,children:"Delete"})]})]})})})}},72955:(e,i,t)=>{t.d(i,{AJ:()=>C,B5:()=>x,LD:()=>g,Pi:()=>f,RZ:()=>I,U2:()=>v,Ub:()=>j,Yj:()=>a,ZD:()=>m,_X:()=>h,c1:()=>y,cq:()=>c,dA:()=>w,fq:()=>A,gR:()=>u,gi:()=>k,ij:()=>p,ul:()=>b});var s=t(81032),n=t(9950),r=t(69572),l=t(97108);const o={selectedItem:!1},d={key:"kanban",master:"master",list:"/backlogs",addColumn:"/add-column",editColumn:"/edit-column",updateColumnOrder:"/update-column-order",deleteColumn:"/delete-column",addItem:"/add-item",editItem:"/edit-item",updateColumnItemOrder:"/update-item-order",addItemComment:"/add-item-comment",deleteItem:"/delete-item",addStory:"/add-story",editStory:"/edit-story",updateStoryOrder:"/update-story-order",updateStoryItemOrder:"/update-storyitem-order",addStoryComment:"/add-story-comment",deleteStory:"/delete-story"};function a(){const{data:e,isLoading:i,error:t,isValidating:o}=(0,r.Ay)(s.J+d.key,l.GO,{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1});return(0,n.useMemo)((()=>({backlogs:null===e||void 0===e?void 0:e.backlogs,backlogsLoading:i,backlogsError:t,backlogsValidating:o})),[e,t,i,o])}async function c(e){(0,r.Tk)(d.key,(i=>{const t=i.backlogs,s=[...t.columns,e],n=[...t.columnsOrder,e.id];return{...i,backlogs:{...t,columns:s,columnsOrder:n}}}),!1)}async function m(e){(0,r.Tk)(d.key,(i=>{const t=i.backlogs,s=t.columns.splice(t.columns.findIndex((i=>i.id===e.id)),1,e),n=[...t.columns,s];return{...i,backlogs:{...t,columns:n}}}),!1)}async function h(e){(0,r.Tk)(d.key,(i=>{const t=i.backlogs;return{...i,backlogs:{...t,columnsOrder:e}}}),!1)}async function u(e){(0,r.Tk)(d.key,(i=>{const t=i.backlogs,s=t.columns.filter((i=>i.id!==e)),n=t.columnsOrder.filter((i=>i!==e));return{...i,backlogs:{...t,columns:s,columnsOrder:n}}}),!1)}async function x(e,i,t){(0,r.Tk)(d.key,(s=>{const n=s.backlogs;let r=n.columns;"0"!==e&&(r=n.columns.map((t=>t.id===e?{...t,itemIds:t.itemIds?[...t.itemIds,i.id]:[i.id]}:t)));let l=n.userStory;"0"!==t&&(l=n.userStory.map((e=>e.id===t?{...e,itemIds:e.itemIds?[...e.itemIds,i.id]:[i.id]}:e)));const o=[...n.items,i];return{...s,backlogs:{...n,columns:r,userStory:l,items:o}}}),!1)}async function p(e,i,t){(0,r.Tk)(d.key,(s=>{const n=s.backlogs,r=n.items.splice(n.items.findIndex((e=>e.id===i.id)),1,i),l=[...n.items,r];let o=n.userStory;if(t){const e=n.userStory.filter((e=>e.itemIds.filter((e=>e===i.id))[0]))[0];void 0!==e&&e.id!==t&&(o=n.userStory.map((e=>e.itemIds.filter((e=>e===i.id))[0]?{...e,itemIds:e.itemIds.filter((e=>e!==i.id))}:e.id===t?{...e,itemIds:e.itemIds?[...e.itemIds,i.id]:[i.id]}:e))),void 0===e&&(o=n.userStory.map((e=>e.id===t?{...e,itemIds:e.itemIds?[...e.itemIds,i.id]:[i.id]}:e)))}let d=n.columns;if(e){const t=n.columns.filter((e=>e.itemIds.filter((e=>e===i.id))[0]))[0];void 0!==t&&t.id!==e&&(d=n.columns.map((t=>t.itemIds.filter((e=>e===i.id))[0]?{...t,itemIds:t.itemIds.filter((e=>e!==i.id))}:t.id===e?{...t,itemIds:t.itemIds?[...t.itemIds,i.id]:[i.id]}:t))),void 0===t&&(d=n.columns.map((t=>t.id===e?{...t,itemIds:t.itemIds?[...t.itemIds,i.id]:[i.id]}:t)))}return{...s,backlogs:{...n,columns:d,userStory:o,items:l}}}),!1)}async function A(e){(0,r.Tk)(d.key,(i=>{const t=i.backlogs;return{...i,backlogs:{...t,columns:e}}}),!1)}async function j(e,i){(0,r.Tk)(d.key,(t=>{const s=t.backlogs,n=s.items.map((t=>t.id===e?{...t,commentIds:t.commentIds?[...t.commentIds,i.id]:[i.id]}:t)),r=[...s.comments,i];return{...t,backlogs:{...s,items:n,comments:r}}}),!1)}async function y(e){(0,r.Tk)(d.key,(i=>{const t=i.backlogs,s=t.items.filter((i=>i.id!==e)),n=t.columns.map((i=>{const t=i.itemIds.filter((i=>i!==e));return{...i,itemIds:t}})),r=t.userStory.map((i=>{const t=i.itemIds.filter((i=>i!==e));return{...i,itemIds:t}}));return{...i,backlogs:{...t,items:s,columns:n,userStory:r}}}),!1)}async function g(e){(0,r.Tk)(d.key,(i=>{const t=i.backlogs,s=[...t.userStory,e],n=[...t.userStoryOrder,e.id];return{...i,backlogs:{...t,userStory:s,userStoryOrder:n}}}),!1)}async function v(e){(0,r.Tk)(d.key,(i=>{const t=i.backlogs;t.userStory.splice(t.userStory.findIndex((i=>i.id===e.id)),1,e);const s=[...t.userStory];return{...i,backlogs:{...t,userStory:s}}}),!1)}async function f(e){(0,r.Tk)(d.key,(i=>{const t=i.backlogs;return{...i,backlogs:{...t,userStoryOrder:e}}}),!1)}async function b(e){(0,r.Tk)(d.key,(i=>{const t=i.backlogs;return{...i,backlogs:{...t,userStory:e}}}),!1)}async function k(e,i){(0,r.Tk)(d.key,(t=>{const s=t.backlogs,n=s.userStory.map((t=>t.id===e?{...t,commentIds:t.commentIds?[...t.commentIds,i.id]:[i.id]}:t)),r=[...s.comments,i];return{...t,backlogs:{...s,userStory:n,comments:r}}}),!1)}async function I(e){(0,r.Tk)(d.key,(i=>{const t=i.backlogs,s=t.userStory.filter((i=>i.id!==e)),n=t.userStoryOrder.filter((i=>i!==e));return{...i,backlogs:{...t,userStory:s,userStoryOrder:n}}}),!1)}function w(){const{data:e,isLoading:i}=(0,r.Ay)(d.key+d.master,(()=>o),{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1});return(0,n.useMemo)((()=>({kanbanMaster:e,kanbanMasterLoading:i})),[e,i])}function C(e){(0,r.Tk)(d.key+d.master,(i=>({...i,selectedItem:e})),!1)}},75423:(e,i,t)=>{t.d(i,{A:()=>Q});var s=t(9950),n=t(71525),r=t(16491),l=t(60899),o=t(93230),d=t(82053),a=t(53065),c=t(74745),m=t(14857),h=t(44967),u=t(2459),x=t(46007),p=t(16243),A=t(44414);const j=t(40630),y=e=>{let{comment:i,profile:t}=e;const s=(0,m.A)();return(0,A.jsx)(h.A,{content:!1,sx:{background:s.palette.mode===p.lG.DARK?s.palette.grey[100]:s.palette.grey[50],p:1.5,mt:1.25},children:(0,A.jsxs)(l.Ay,{container:!0,spacing:1,children:[(0,A.jsx)(l.Ay,{item:!0,xs:12,children:(0,A.jsxs)(l.Ay,{container:!0,wrap:"nowrap",alignItems:"center",spacing:1,children:[(0,A.jsx)(l.Ay,{item:!0,children:(0,A.jsx)(x.A,{sx:{width:24,height:24},size:"sm",alt:"User 1",src:t&&t.avatar&&j(`./${t.avatar}`)})}),(0,A.jsx)(l.Ay,{item:!0,xs:!0,zeroMinWidth:!0,children:(0,A.jsxs)(l.Ay,{container:!0,alignItems:"center",spacing:1,justifyContent:"space-between",children:[(0,A.jsx)(l.Ay,{item:!0,children:(0,A.jsx)(d.A,{align:"left",variant:"subtitle1",component:"div",children:t.name})}),(0,A.jsx)(l.Ay,{item:!0,children:(0,A.jsxs)(o.A,{direction:"row",alignItems:"center",spacing:.5,children:[(0,A.jsx)(u.A,{size:6,sx:{mt:-.25},color:"secondary"}),(0,A.jsx)(d.A,{variant:"caption",color:"secondary",children:t.time})]})})]})})]})}),(0,A.jsx)(l.Ay,{item:!0,xs:12,sx:{"&.MuiGrid-root":{pt:1.5}},children:(0,A.jsx)(d.A,{align:"left",variant:"body2",children:null===i||void 0===i?void 0:i.comment})})]})})};var g=t(19647),v=t(8145),f=t(6266),b=t(25979),k=t(58567),I=t(16497),w=t(77966),C=t(70006),S=t(23266),D=t(24516),T=t(18216),O=t(34102),z=t(81831),M=t(30545),W=t(29714),F=t(45818),P=t(855),R=t(25556),V=t(72955),E=t(91807);const H=t(40630),L=W.Ik({title:W.Yj().required("Task title is required"),dueDate:W.p6()}),q=e=>{let{item:i,profiles:t,userStory:s,columns:n,handleDrawerOpen:d}=e;const a=s.filter((e=>e.itemIds.filter((e=>e===i.id))[0]))[0],c=n.filter((e=>e.itemIds.filter((e=>e===i.id))[0]))[0],m=(0,F.Wx)({enableReinitialize:!0,initialValues:{id:i.id,title:i.title,assign:i.assign,priority:i.priority,dueDate:i.dueDate?new Date(i.dueDate):new Date,description:i.description,commentIds:i.commentIds,image:i.image,storyId:a?a.id:"",columnId:c?c.id:"",files:i.attachments},validationSchema:L,onSubmit:e=>{const i={id:e.id,title:e.title,assign:e.assign,priority:e.priority,dueDate:e.dueDate?new Date(e.dueDate):new Date,description:e.description,commentIds:e.commentIds,image:e.image,attachments:e.files};(0,V.ij)(e.columnId,i,e.storyId),(0,E.aN)({open:!0,message:"Submit Success",variant:"alert",alert:{color:"success"}}),d()}});return(0,A.jsx)("form",{onSubmit:m.handleSubmit,children:(0,A.jsx)(z.$,{dateAdapter:O.h,children:(0,A.jsxs)(l.Ay,{container:!0,spacing:2.5,children:[(0,A.jsx)(l.Ay,{item:!0,xs:12,children:(0,A.jsxs)(o.A,{spacing:1,children:[(0,A.jsx)(g.A,{children:"Title"}),(0,A.jsx)(v.A,{fullWidth:!0,id:"title",name:"title",placeholder:"Title",value:m.values.title,onChange:m.handleChange,error:m.touched.title&&Boolean(m.errors.title),helperText:m.touched.title&&m.errors.title})]})}),(0,A.jsx)(l.Ay,{item:!0,xs:12,children:(0,A.jsxs)(o.A,{spacing:1,children:[(0,A.jsx)(g.A,{children:"Assign to"}),(0,A.jsx)(f.A,{id:"assign",fullWidth:!0,autoHighlight:!0,options:t,value:t.find((e=>e.id===m.values.assign)),getOptionLabel:e=>e.name,isOptionEqualToValue:e=>e.id===m.values.assign,renderOption:(e,i)=>(0,A.jsxs)(r.A,{component:"li",sx:{"& > img":{mr:2,flexShrink:0}},...e,children:[(0,A.jsx)("img",{loading:"lazy",width:"20",src:H(`./${i.avatar}`),alt:""}),i.name]}),renderInput:e=>(0,A.jsx)(v.A,{...e,name:"assign",placeholder:"Choose a assignee",inputProps:{...e.inputProps,autoComplete:"new-password"}}),onChange:(e,i)=>{m.setFieldValue("assign",null===i||void 0===i?void 0:i.id)}})]})}),(0,A.jsx)(l.Ay,{item:!0,xs:12,children:(0,A.jsxs)(o.A,{spacing:1,children:[(0,A.jsx)(g.A,{children:"Prioritize"}),(0,A.jsx)(b.A,{children:(0,A.jsxs)(k.A,{row:!0,"aria-label":"color",value:m.values.priority,onChange:m.handleChange,name:"priority",id:"priority",children:[(0,A.jsx)(I.A,{value:"low",control:(0,A.jsx)(w.A,{color:"primary",sx:{color:"primary.main"}}),label:"Low"}),(0,A.jsx)(I.A,{value:"medium",control:(0,A.jsx)(w.A,{color:"warning",sx:{color:"warning.main"}}),label:"Medium"}),(0,A.jsx)(I.A,{value:"high",control:(0,A.jsx)(w.A,{color:"error",sx:{color:"error.main"}}),label:"High"})]})})]})}),(0,A.jsx)(l.Ay,{item:!0,xs:12,children:(0,A.jsxs)(o.A,{spacing:1,children:[(0,A.jsx)(g.A,{children:"Due date"}),(0,A.jsx)(M.T,{value:m.values.dueDate,format:"dd/MM/yyyy",onChange:e=>{m.setFieldValue("dueDate",e)}})]})}),(0,A.jsx)(l.Ay,{item:!0,xs:12,children:(0,A.jsxs)(o.A,{spacing:1,children:[(0,A.jsx)(g.A,{children:"Description"}),(0,A.jsx)(v.A,{fullWidth:!0,id:"description",name:"description",multiline:!0,rows:3,value:m.values.description,onChange:m.handleChange,error:m.touched.description&&Boolean(m.errors.description),helperText:m.touched.description&&m.errors.description})]})}),(0,A.jsx)(l.Ay,{item:!0,xs:12,children:(0,A.jsxs)(o.A,{spacing:1,children:[(0,A.jsx)(g.A,{children:"User Story"}),(0,A.jsx)(b.A,{fullWidth:!0,children:(0,A.jsx)(C.A,{id:"storyId",name:"storyId",displayEmpty:!0,value:m.values.storyId,onChange:m.handleChange,inputProps:{"aria-label":"Without label"},children:s.map(((e,i)=>(0,A.jsxs)(S.A,{value:e.id,children:[e.id," - ",e.title]},i)))})})]})}),(0,A.jsx)(l.Ay,{item:!0,xs:12,children:(0,A.jsxs)(o.A,{spacing:1,children:[(0,A.jsx)(g.A,{children:"State"}),(0,A.jsx)(b.A,{fullWidth:!0,children:(0,A.jsx)(C.A,{id:"columnId",name:"columnId",displayEmpty:!0,value:m.values.columnId,onChange:m.handleChange,inputProps:{"aria-label":"Without label"},children:n.map(((e,i)=>(0,A.jsx)(S.A,{value:e.id,children:e.title},i)))})})]})}),(0,A.jsx)(l.Ay,{item:!0,xs:12,children:(0,A.jsxs)(l.Ay,{container:!0,spacing:1,children:[(0,A.jsx)(l.Ay,{item:!0,xs:12,children:(0,A.jsx)(g.A,{sx:{mt:.5},children:"Attachments:"})}),(0,A.jsx)(l.Ay,{item:!0,xs:12,children:(0,A.jsx)(R.A,{type:"STANDARD",showList:!0,setFieldValue:m.setFieldValue,files:m.values.files,error:m.touched.files&&!!m.errors.files})}),m.touched.files&&m.errors.files&&(0,A.jsx)(l.Ay,{item:!0,xs:12,children:(0,A.jsx)(D.A,{error:!0,id:"standard-weight-helper-text-password-login",children:m.errors.files})})]})}),(0,A.jsx)(l.Ay,{item:!0,xs:12,children:(0,A.jsx)(P.A,{children:(0,A.jsx)(T.A,{fullWidth:!0,variant:"contained",type:"submit",children:"Save"})})})]})})})};var U=t(9163),$=t(86263),N=t(58939),B=t(90421),Y=t(92019);const G=new U.Chance,X=e=>{let{itemId:i}=e;const t=(0,m.A)(),[n,o]=(0,s.useState)(""),[d,a]=(0,s.useState)(!1),c=()=>{if(n.length>0){const e={id:`${G.integer({min:1e3,max:9999})}`,comment:n,profileId:"profile-3"};(0,V.Ub)(i,e),(0,E.aN)({open:!0,message:"Comment Added successfully",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"success"}}),o("")}else a(!0)};return(0,A.jsx)(r.A,{sx:{p:2,pb:1.5,border:`1px solid ${t.palette.divider}`},children:(0,A.jsxs)(l.Ay,{container:!0,alignItems:"center",spacing:.5,children:[(0,A.jsx)(l.Ay,{item:!0,xs:12,children:(0,A.jsx)(v.A,{fullWidth:!0,placeholder:"Add Comment",value:n,onChange:e=>{const i=e.target.value;o(i),i.length<=0?a(!0):a(!1)},sx:{mb:3,"& input":{bgcolor:"transparent",p:0,borderRadius:"0px"},"& fieldset":{display:"none"},"& .MuiFormHelperText-root":{ml:0},"& .MuiOutlinedInput-root":{bgcolor:"transparent","&.Mui-focused":{boxShadow:"none"}}},onKeyUp:e=>{"Enter"!==e.key&&13!==e.keyCode||c()},helperText:d?"Comment is required.":"",error:d})}),(0,A.jsx)(l.Ay,{item:!0,children:(0,A.jsx)($.A,{children:(0,A.jsx)(N.A,{})})}),(0,A.jsx)(l.Ay,{item:!0,children:(0,A.jsx)($.A,{children:(0,A.jsx)(B.A,{})})}),(0,A.jsx)(l.Ay,{item:!0,children:(0,A.jsx)($.A,{children:(0,A.jsx)(Y.A,{})})}),(0,A.jsx)(l.Ay,{item:!0,xs:!0,zeroMinWidth:!0}),(0,A.jsx)(l.Ay,{item:!0,children:(0,A.jsx)(T.A,{size:"small",variant:"contained",color:"primary",onClick:c,children:"Comment"})})]})})};var _=t(37322),K=t(41492),J=t(36256),Z=t(94118);const Q=()=>{let e,i=(0,A.jsx)(A.Fragment,{});const{backlogs:t}=(0,V.Yj)(),{kanbanMaster:m}=(0,V.dA)(),h=!(null===m||void 0===m||!m.selectedItem)&&m.selectedItem,[u,x]=(0,s.useState)(!1!==h),p=()=>{x((e=>!e)),(0,V.AJ)(!1)};var j;((0,s.useEffect)((()=>{!1!==h&&x(!0)}),[h]),!1!==h)&&(e=null===t||void 0===t?void 0:t.items.filter((e=>e.id===h))[0],null!==(j=e)&&void 0!==j&&j.commentIds&&(i=[...e.commentIds].reverse().map(((e,i)=>{const s=null===t||void 0===t?void 0:t.comments.filter((i=>i.id===e))[0],n=null===t||void 0===t?void 0:t.profiles.filter((e=>e.id===s.profileId))[0];return(0,A.jsx)(y,{comment:s,profile:n},i)}))));const[g,v]=(0,s.useState)(!1);return(0,A.jsx)(n.Ay,{sx:{ml:u?3:0,flexShrink:0,zIndex:1200,overflowX:"hidden",width:{xs:320,md:450},"& .MuiDrawer-paper":{width:{xs:320,md:450},border:"none",borderRadius:"0px"}},variant:"temporary",anchor:"right",open:u,ModalProps:{keepMounted:!0},onClose:p,children:u&&(0,A.jsxs)(K.A,{sx:{overflowX:"hidden",height:"100vh"},children:[e&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(r.A,{sx:{p:3},children:(0,A.jsxs)(l.Ay,{container:!0,alignItems:"center",spacing:.5,justifyContent:"space-between",children:[(0,A.jsx)(l.Ay,{item:!0,sx:{width:"calc(100% - 64px)"},children:(0,A.jsx)(o.A,{direction:"row",spacing:.5,alignItems:"center",justifyContent:"space-between",children:(0,A.jsx)(d.A,{variant:"h4",sx:{display:"inline-block",width:"calc(100% - 34px)",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",verticalAlign:"middle"},children:e.title})})}),(0,A.jsxs)(l.Ay,{item:!0,children:[(0,A.jsxs)(o.A,{direction:"row",alignItems:"center",children:[(0,A.jsx)(a.A,{title:"Delete Task",children:(0,A.jsx)($.A,{color:"error",onClick:()=>v(!0),size:"small",sx:{fontSize:"0.875rem"},children:(0,A.jsx)(J.A,{})})}),(0,A.jsx)(a.A,{title:"Close",children:(0,A.jsx)($.A,{color:"secondary",onClick:p,size:"small",sx:{fontSize:"0.875rem"},children:(0,A.jsx)(Z.A,{})})})]}),(0,A.jsx)(_.A,{title:e.title,open:g,handleClose:i=>{v(!1),i&&(p(),(0,V.c1)(e.id),(0,E.aN)({open:!0,message:"Task Deleted successfully",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"success"}}))}})]})]})}),(0,A.jsx)(c.A,{}),(0,A.jsx)(r.A,{sx:{p:3},children:(0,A.jsxs)(l.Ay,{container:!0,spacing:2,children:[(0,A.jsx)(l.Ay,{item:!0,xs:12,children:(0,A.jsx)(q,{item:e,profiles:null===t||void 0===t?void 0:t.profiles,userStory:null===t||void 0===t?void 0:t.userStory,columns:null===t||void 0===t?void 0:t.columns,handleDrawerOpen:p})}),(0,A.jsx)(l.Ay,{item:!0,xs:12,children:i}),(0,A.jsx)(l.Ay,{item:!0,xs:12,children:(0,A.jsx)(X,{itemId:h})})]})})]}),!e&&(0,A.jsx)(o.A,{justifyContent:"center",alignItems:"center",sx:{height:"100vh"},children:(0,A.jsx)(d.A,{variant:"h5",color:"error",children:"No item found"})})]})})}},82470:(e,i,t)=>{t.d(i,{A:()=>h});var s=t(96583),n=t(28170),r=t(93230),l=t(82053),o=t(18216),d=t(46007),a=t(37476),c=t(36256),m=t(44414);function h(e){let{title:i,open:t,handleClose:h}=e;return(0,m.jsx)(s.A,{open:t,onClose:()=>h(!1),keepMounted:!0,TransitionComponent:a.s,maxWidth:"xs","aria-labelledby":"item-delete-title","aria-describedby":"item-delete-description",children:(0,m.jsx)(n.A,{sx:{mt:2,my:1},children:(0,m.jsxs)(r.A,{alignItems:"center",spacing:3.5,children:[(0,m.jsx)(d.A,{color:"error",sx:{width:72,height:72,fontSize:"1.75rem"},children:(0,m.jsx)(c.A,{})}),(0,m.jsxs)(r.A,{spacing:2,children:[(0,m.jsx)(l.A,{variant:"h4",align:"center",children:"Are you sure you want to delete?"}),(0,m.jsxs)(l.A,{align:"center",children:["By deleting",(0,m.jsxs)(l.A,{variant:"subtitle1",component:"span",children:[" ",'"',i,'"'," "]}),"user story, all task inside that user story will also be deleted."]})]}),(0,m.jsxs)(r.A,{direction:"row",spacing:2,sx:{width:1},children:[(0,m.jsx)(o.A,{fullWidth:!0,onClick:()=>h(!1),color:"secondary",variant:"outlined",children:"Cancel"}),(0,m.jsx)(o.A,{fullWidth:!0,color:"error",variant:"contained",onClick:()=>h(!0),autoFocus:!0,children:"Delete"})]})]})})})}},97694:(e,i,t)=>{t.d(i,{A:()=>Z});var s=t(9950),n=t(71525),r=t(16491),l=t(60899),o=t(93230),d=t(82053),a=t(53065),c=t(74745),m=t(19647),h=t(8145),u=t(6266),x=t(25979),p=t(58567),A=t(16497),j=t(77966),y=t(70006),g=t(23266),v=t(24516),f=t(18216),b=t(34102),k=t(81831),I=t(30545),w=t(29714),C=t(45818),S=t(14857),D=t(86263),T=t(72955),O=t(91807),z=t(9163),M=t(58939),W=t(90421),F=t(92019),P=t(44414);const R=new z.Chance,V=e=>{let{storyId:i}=e;const t=(0,S.A)(),[n,o]=(0,s.useState)(""),[d,a]=(0,s.useState)(!1),c=()=>{if(n.length>0){const e={id:`${R.integer({min:1e3,max:9999})}`,comment:n,profileId:"profile-3"};(0,T.gi)(i,e),(0,O.aN)({open:!0,message:"Comment Added successfully",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"success"}}),o("")}else a(!0)};return(0,P.jsx)(r.A,{sx:{p:2,pb:1.5,border:`1px solid ${t.palette.divider}`},children:(0,P.jsxs)(l.Ay,{container:!0,alignItems:"center",spacing:.5,children:[(0,P.jsx)(l.Ay,{item:!0,xs:12,children:(0,P.jsx)(h.A,{fullWidth:!0,placeholder:"Add Comment",value:n,onChange:e=>{const i=e.target.value;o(i),i.length<=0?a(!0):a(!1)},sx:{mb:3,"& input":{bgcolor:"transparent",p:0,borderRadius:"0px"},"& fieldset":{display:"none"},"& .MuiFormHelperText-root":{ml:0},"& .MuiOutlinedInput-root":{bgcolor:"transparent","&.Mui-focused":{boxShadow:"none"}}},onKeyUp:e=>{"Enter"!==e.key&&13!==e.keyCode||c()},helperText:d?"Comment is required.":"",error:d})}),(0,P.jsx)(l.Ay,{item:!0,children:(0,P.jsx)(D.A,{children:(0,P.jsx)(M.A,{})})}),(0,P.jsx)(l.Ay,{item:!0,children:(0,P.jsx)(D.A,{children:(0,P.jsx)(W.A,{})})}),(0,P.jsx)(l.Ay,{item:!0,children:(0,P.jsx)(D.A,{children:(0,P.jsx)(F.A,{})})}),(0,P.jsx)(l.Ay,{item:!0,xs:!0,zeroMinWidth:!0}),(0,P.jsx)(l.Ay,{item:!0,children:(0,P.jsx)(f.A,{size:"small",variant:"contained",color:"primary",onClick:c,children:"Comment"})})]})})};var E=t(44967),H=t(2459),L=t(46007),q=t(16243);const U=t(40630),$=e=>{let{comment:i,profile:t}=e;const s=(0,S.A)();return(0,P.jsx)(E.A,{content:!1,sx:{background:s.palette.mode===q.lG.DARK?s.palette.grey[100]:s.palette.grey[50],p:1.5,mt:1.25},children:(0,P.jsxs)(l.Ay,{container:!0,spacing:1,children:[(0,P.jsx)(l.Ay,{item:!0,xs:12,children:(0,P.jsxs)(l.Ay,{container:!0,wrap:"nowrap",alignItems:"center",spacing:1,children:[(0,P.jsx)(l.Ay,{item:!0,children:(0,P.jsx)(L.A,{sx:{width:24,height:24},size:"sm",alt:"User 1",src:t&&t.avatar&&U(`./${t.avatar}`)})}),(0,P.jsx)(l.Ay,{item:!0,xs:!0,zeroMinWidth:!0,children:(0,P.jsxs)(l.Ay,{container:!0,alignItems:"center",spacing:1,justifyContent:"space-between",children:[(0,P.jsx)(l.Ay,{item:!0,children:(0,P.jsx)(d.A,{align:"left",variant:"subtitle1",component:"div",children:t.name})}),(0,P.jsx)(l.Ay,{item:!0,children:(0,P.jsxs)(o.A,{direction:"row",alignItems:"center",spacing:.5,children:[(0,P.jsx)(H.A,{size:6,sx:{mt:-.25},color:"secondary"}),(0,P.jsx)(d.A,{variant:"caption",color:"secondary",children:t.time})]})})]})})]})}),(0,P.jsx)(l.Ay,{item:!0,xs:12,sx:{"&.MuiGrid-root":{pt:1.5}},children:(0,P.jsx)(d.A,{align:"left",variant:"body2",children:null===i||void 0===i?void 0:i.comment})})]})})};var N=t(82470),B=t(855),Y=t(25556),G=t(41492),X=t(36256),_=t(94118);const K=t(40630),J=w.Ik({title:w.Yj().required("User story title is required"),dueDate:w.p6()}),Z=e=>{let{story:i,open:t,handleDrawerOpen:w}=e;const{backlogs:S}=(0,T.Yj)(),z=(0,C.Wx)({enableReinitialize:!0,initialValues:{id:i.id,title:i.title,assign:i.assign,columnId:i.columnId,priority:i.priority,dueDate:i.dueDate?new Date(i.dueDate):new Date,acceptance:i.acceptance,description:i.description,commentIds:i.commentIds,image:!1,itemIds:i.itemIds,files:[]},validationSchema:J,onSubmit:e=>{(0,T.U2)(e),(0,O.aN)({open:!0,message:"Submit Success",variant:"alert",alert:{color:"success"}}),w()}}),[M,W]=(0,s.useState)(!1);return(0,P.jsx)(n.Ay,{sx:{ml:t?3:0,flexShrink:0,zIndex:1200,overflowX:"hidden",width:{xs:320,md:450},"& .MuiDrawer-paper":{width:{xs:320,md:450},border:"none",borderRadius:"0px"}},variant:"temporary",anchor:"right",open:t,ModalProps:{keepMounted:!0},onClose:()=>{w(),z.resetForm()},children:t&&(0,P.jsxs)(G.A,{sx:{overflowX:"hidden",height:"100vh"},children:[(0,P.jsx)(r.A,{sx:{p:3},children:(0,P.jsxs)(l.Ay,{container:!0,alignItems:"center",spacing:.5,justifyContent:"space-between",children:[(0,P.jsx)(l.Ay,{item:!0,sx:{width:"calc(100% - 64px)"},children:(0,P.jsx)(o.A,{direction:"row",spacing:.5,alignItems:"center",children:(0,P.jsx)(d.A,{variant:"h4",sx:{display:"inline-block",width:"calc(100% - 34px)",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",verticalAlign:"middle"},children:i.title})})}),(0,P.jsxs)(l.Ay,{item:!0,children:[(0,P.jsxs)(o.A,{direction:"row",alignItems:"center",children:[(0,P.jsx)(a.A,{title:"Delete Task",children:(0,P.jsx)(D.A,{color:"error",onClick:()=>W(!0),size:"small",sx:{fontSize:"0.875rem"},children:(0,P.jsx)(X.A,{})})}),(0,P.jsx)(a.A,{title:"Close",children:(0,P.jsx)(D.A,{color:"secondary",onClick:w,size:"small",sx:{fontSize:"0.875rem"},children:(0,P.jsx)(_.A,{})})})]}),(0,P.jsx)(N.A,{title:i.title,open:M,handleClose:e=>{W(!1),e&&(w(),(0,T.RZ)(i.id),(0,O.aN)({open:!0,message:"Story Deleted successfully",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"success"}}))}})]})]})}),(0,P.jsx)(c.A,{}),(0,P.jsx)(r.A,{sx:{p:3},children:(0,P.jsxs)(l.Ay,{container:!0,spacing:2,children:[(0,P.jsx)(l.Ay,{item:!0,xs:12,children:(0,P.jsx)("form",{onSubmit:z.handleSubmit,children:(0,P.jsx)(k.$,{dateAdapter:b.h,children:(0,P.jsxs)(l.Ay,{container:!0,spacing:2.5,children:[(0,P.jsx)(l.Ay,{item:!0,xs:12,children:(0,P.jsxs)(o.A,{spacing:1,children:[(0,P.jsx)(m.A,{children:"Title"}),(0,P.jsx)(h.A,{fullWidth:!0,id:"title",name:"title",placeholder:"Title",value:z.values.title,onChange:z.handleChange,error:z.touched.title&&Boolean(z.errors.title),helperText:z.touched.title&&z.errors.title})]})}),(0,P.jsx)(l.Ay,{item:!0,xs:12,children:(0,P.jsxs)(o.A,{spacing:1,children:[(0,P.jsx)(m.A,{children:"Assign to"}),(0,P.jsx)(u.A,{id:"assign",value:(null===S||void 0===S?void 0:S.profiles.find((e=>e.id===z.values.assign)))||null,onChange:(e,i)=>{z.setFieldValue("assign",null===i||void 0===i?void 0:i.id)},options:null===S||void 0===S?void 0:S.profiles,fullWidth:!0,autoHighlight:!0,getOptionLabel:e=>e.name,isOptionEqualToValue:e=>e.id===z.values.assign,renderOption:(e,i)=>(0,P.jsxs)(r.A,{component:"li",sx:{"& > img":{mr:2,flexShrink:0}},...e,children:[(0,P.jsx)("img",{loading:"lazy",width:"20",src:K(`./${i.avatar}`),alt:""}),i.name]}),renderInput:e=>(0,P.jsx)(h.A,{...e,placeholder:"Choose a assignee",inputProps:{...e.inputProps,autoComplete:"new-password"}})})]})}),(0,P.jsx)(l.Ay,{item:!0,xs:12,children:(0,P.jsxs)(o.A,{spacing:1,children:[(0,P.jsx)(m.A,{children:"Prioritize"}),(0,P.jsx)(x.A,{children:(0,P.jsxs)(p.A,{row:!0,"aria-label":"color",value:z.values.priority,onChange:z.handleChange,name:"priority",id:"priority",children:[(0,P.jsx)(A.A,{value:"low",control:(0,P.jsx)(j.A,{color:"primary",sx:{color:"primary.main"}}),label:"Low"}),(0,P.jsx)(A.A,{value:"medium",control:(0,P.jsx)(j.A,{color:"warning",sx:{color:"warning.main"}}),label:"Medium"}),(0,P.jsx)(A.A,{value:"high",control:(0,P.jsx)(j.A,{color:"error",sx:{color:"error.main"}}),label:"High"})]})})]})}),(0,P.jsx)(l.Ay,{item:!0,xs:12,children:(0,P.jsxs)(o.A,{spacing:1,children:[(0,P.jsx)(m.A,{children:"Due date"}),(0,P.jsx)(I.T,{value:z.values.dueDate,format:"dd/MM/yyyy",onChange:e=>{z.setFieldValue("dueDate",e)}})]})}),(0,P.jsx)(l.Ay,{item:!0,xs:12,children:(0,P.jsxs)(o.A,{spacing:1,children:[(0,P.jsx)(m.A,{children:"Acceptance"}),(0,P.jsx)(h.A,{fullWidth:!0,id:"acceptance",name:"acceptance",multiline:!0,rows:3,value:z.values.acceptance,onChange:z.handleChange,error:z.touched.acceptance&&Boolean(z.errors.acceptance),helperText:z.touched.acceptance&&z.errors.acceptance})]})}),(0,P.jsx)(l.Ay,{item:!0,xs:12,children:(0,P.jsxs)(o.A,{spacing:1,children:[(0,P.jsx)(m.A,{children:"Description"}),(0,P.jsx)(h.A,{fullWidth:!0,id:"description",name:"description",multiline:!0,rows:3,value:z.values.description,onChange:z.handleChange,error:z.touched.description&&Boolean(z.errors.description),helperText:z.touched.description&&z.errors.description})]})}),(0,P.jsx)(l.Ay,{item:!0,xs:12,children:(0,P.jsxs)(o.A,{spacing:1,children:[(0,P.jsx)(m.A,{children:"State"}),(0,P.jsx)(x.A,{fullWidth:!0,sx:{m:1},children:(0,P.jsx)(y.A,{id:"columnId",name:"columnId",displayEmpty:!0,value:z.values.columnId,onChange:z.handleChange,inputProps:{"aria-label":"Without label"},children:null===S||void 0===S?void 0:S.columns.map(((e,i)=>(0,P.jsx)(g.A,{value:e.id,children:e.title},i)))})})]})}),(0,P.jsx)(l.Ay,{item:!0,xs:12,children:(0,P.jsxs)(l.Ay,{container:!0,spacing:1,children:[(0,P.jsx)(l.Ay,{item:!0,xs:12,children:(0,P.jsx)(m.A,{sx:{mt:.5},children:"Attachments:"})}),(0,P.jsx)(l.Ay,{item:!0,xs:12,children:(0,P.jsx)(Y.A,{type:"STANDARD",showList:!0,setFieldValue:z.setFieldValue,files:z.values.files,error:z.touched.files&&!!z.errors.files})}),z.touched.files&&z.errors.files&&(0,P.jsx)(l.Ay,{item:!0,xs:12,children:(0,P.jsx)(v.A,{error:!0,id:"standard-weight-helper-text-password-login",children:z.errors.files})})]})}),(0,P.jsx)(l.Ay,{item:!0,xs:12,children:(0,P.jsx)(B.A,{children:(0,P.jsx)(f.A,{fullWidth:!0,variant:"contained",type:"submit",children:"Save"})})})]})})})}),(0,P.jsx)(l.Ay,{item:!0,xs:12,children:(null===i||void 0===i?void 0:i.commentIds)&&[...null===i||void 0===i?void 0:i.commentIds].reverse().map(((e,i)=>{const t=null===S||void 0===S?void 0:S.comments.filter((i=>i.id===e))[0],s=null===S||void 0===S?void 0:S.profiles.filter((e=>e.id===t.profileId))[0];return(0,P.jsx)($,{comment:t,profile:s},i)}))}),(0,P.jsx)(l.Ay,{item:!0,xs:12,children:(0,P.jsx)(V,{storyId:i.id})})]})})]})})}}}]);