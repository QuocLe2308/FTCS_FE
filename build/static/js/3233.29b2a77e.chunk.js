"use strict";(self.webpackChunkmantis_material_react=self.webpackChunkmantis_material_react||[]).push([[3233],{23233:(e,i,r)=>{r.r(i),r.d(i,{default:()=>Ce});var l=r(9950),n=r(14857),s=r(1320),t=r(15769),o=r(69780),a=r(9213),d=r(68605),c=r(53065),h=r(18216),x=r(34075),u=r(88185),p=r(71525),m=r(16491),A=r(93230),j=r(82053),g=r(74745),v=r(60899),y=r(19647),f=r(8145),w=r(6266),b=r(25979),C=r(58567),D=r(16497),S=r(77966),I=r(70006),k=r(23266),T=r(24516),W=r(34102),z=r(81831),M=r(30545),O=r(29714),V=r(9163),P=r(45818),R=r(86263),H=r(41492),B=r(855),F=r(25556),q=r(72955),E=r(91807),L=r(94118),N=r(44414);const Y=new V.Chance,$=r(40630),X=O.Ik({title:O.Yj().required("User story title is required"),dueDate:O.p6().required("Due date is required").nullable()}),_=e=>{let{open:i,handleDrawerOpen:r}=e;const{backlogs:l}=(0,q.Yj)(),n=(0,P.Wx)({initialValues:{id:"",title:"",assign:null,columnId:"",priority:"low",dueDate:null,acceptance:"",description:"",commentIds:"",image:!1,itemIds:[],files:[]},enableReinitialize:!0,validationSchema:X,onSubmit:(e,i)=>{let{resetForm:l}=i;e.id=`${Y.integer({min:1e3,max:9999})}`,(0,q.LD)(e),(0,E.aN)({open:!0,message:"Submit Success",variant:"alert",alert:{color:"success"}}),r(),l()}});return(0,N.jsx)(p.Ay,{sx:{ml:i?3:0,flexShrink:0,zIndex:1200,overflowX:"hidden",width:{xs:320,md:450},"& .MuiDrawer-paper":{width:{xs:320,md:450},border:"none",borderRadius:"0px"}},variant:"temporary",anchor:"right",open:i,ModalProps:{keepMounted:!0},onClose:r,children:i&&(0,N.jsxs)(H.A,{sx:{overflowX:"hidden",height:"100vh"},children:[(0,N.jsx)(m.A,{sx:{p:3},children:(0,N.jsxs)(A.A,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,N.jsx)(j.A,{variant:"h4",children:"Add Story"}),(0,N.jsx)(c.A,{title:"Close",children:(0,N.jsx)(R.A,{color:"secondary",onClick:r,size:"small",sx:{fontSize:"0.875rem"},children:(0,N.jsx)(L.A,{})})})]})}),(0,N.jsx)(g.A,{}),(0,N.jsx)(m.A,{sx:{p:3},children:(0,N.jsx)("form",{onSubmit:n.handleSubmit,children:(0,N.jsx)(z.$,{dateAdapter:W.h,children:(0,N.jsxs)(v.Ay,{container:!0,spacing:2.5,children:[(0,N.jsx)(v.Ay,{item:!0,xs:12,children:(0,N.jsxs)(A.A,{spacing:1,children:[(0,N.jsx)(y.A,{children:"Title"}),(0,N.jsx)(f.A,{fullWidth:!0,id:"title",name:"title",placeholder:"Title",value:n.values.title,onChange:n.handleChange,error:n.touched.title&&Boolean(n.errors.title),helperText:n.touched.title&&n.errors.title})]})}),(0,N.jsx)(v.Ay,{item:!0,xs:12,children:(0,N.jsxs)(A.A,{spacing:1,children:[(0,N.jsx)(y.A,{children:"Assign to"}),(0,N.jsx)(w.A,{id:"assign",value:(null===l||void 0===l?void 0:l.profiles.find((e=>e.id===n.values.assign)))||null,onChange:(e,i)=>{n.setFieldValue("assign",null===i||void 0===i?void 0:i.id)},options:null===l||void 0===l?void 0:l.profiles,fullWidth:!0,autoHighlight:!0,getOptionLabel:e=>e.name,isOptionEqualToValue:e=>e.id===n.values.assign,renderOption:(e,i)=>(0,N.jsxs)(m.A,{component:"li",sx:{"& > img":{mr:2,flexShrink:0}},...e,children:[(0,N.jsx)("img",{loading:"lazy",width:"20",src:$(`./${i.avatar}`),alt:""}),i.name]}),renderInput:e=>(0,N.jsx)(f.A,{...e,placeholder:"Choose a assignee",inputProps:{...e.inputProps,autoComplete:"new-password"}})})]})}),(0,N.jsx)(v.Ay,{item:!0,xs:12,children:(0,N.jsxs)(A.A,{spacing:1,children:[(0,N.jsx)(y.A,{children:"Prioritize"}),(0,N.jsx)(b.A,{children:(0,N.jsxs)(C.A,{row:!0,"aria-label":"color",value:n.values.priority,onChange:n.handleChange,name:"priority",id:"priority",children:[(0,N.jsx)(D.A,{value:"low",control:(0,N.jsx)(S.A,{color:"primary",sx:{color:"primary.main"}}),label:"Low"}),(0,N.jsx)(D.A,{value:"medium",control:(0,N.jsx)(S.A,{color:"warning",sx:{color:"warning.main"}}),label:"Medium"}),(0,N.jsx)(D.A,{value:"high",control:(0,N.jsx)(S.A,{color:"error",sx:{color:"error.main"}}),label:"High"})]})})]})}),(0,N.jsx)(v.Ay,{item:!0,xs:12,children:(0,N.jsxs)(A.A,{spacing:1,children:[(0,N.jsx)(y.A,{children:"Due date"}),(0,N.jsx)(M.T,{value:n.values.dueDate,format:"dd/MM/yyyy",onChange:e=>{n.setFieldValue("dueDate",e)}})]})}),(0,N.jsx)(v.Ay,{item:!0,xs:12,children:(0,N.jsxs)(A.A,{spacing:1,children:[(0,N.jsx)(y.A,{children:"Acceptance"}),(0,N.jsx)(f.A,{fullWidth:!0,id:"acceptance",name:"acceptance",multiline:!0,rows:3,value:n.values.acceptance,onChange:n.handleChange,error:n.touched.acceptance&&Boolean(n.errors.acceptance),helperText:n.touched.acceptance&&n.errors.acceptance})]})}),(0,N.jsx)(v.Ay,{item:!0,xs:12,children:(0,N.jsxs)(A.A,{spacing:1,children:[(0,N.jsx)(y.A,{children:"Description"}),(0,N.jsx)(f.A,{fullWidth:!0,id:"description",name:"description",multiline:!0,rows:3,value:n.values.description,onChange:n.handleChange,error:n.touched.description&&Boolean(n.errors.description),helperText:n.touched.description&&n.errors.description})]})}),(0,N.jsx)(v.Ay,{item:!0,xs:12,children:(0,N.jsxs)(A.A,{spacing:1,children:[(0,N.jsx)(y.A,{children:"State"}),(0,N.jsx)(b.A,{fullWidth:!0,sx:{m:1},children:(0,N.jsx)(I.A,{id:"columnId",name:"columnId",displayEmpty:!0,value:n.values.columnId,onChange:n.handleChange,inputProps:{"aria-label":"Without label"},children:null===l||void 0===l?void 0:l.columns.map(((e,i)=>(0,N.jsx)(k.A,{value:e.id,children:e.title},i)))})})]})}),(0,N.jsx)(v.Ay,{item:!0,xs:12,children:(0,N.jsxs)(v.Ay,{container:!0,spacing:1,children:[(0,N.jsx)(v.Ay,{item:!0,xs:12,children:(0,N.jsx)(y.A,{sx:{mt:.5},children:"Attachments:"})}),(0,N.jsx)(v.Ay,{item:!0,xs:12,children:(0,N.jsx)(F.A,{type:"STANDARD",showList:!0,setFieldValue:n.setFieldValue,files:n.values.files,error:n.touched.files&&!!n.errors.files})}),n.touched.files&&n.errors.files&&(0,N.jsx)(v.Ay,{item:!0,xs:12,children:(0,N.jsx)(T.A,{error:!0,id:"standard-weight-helper-text-password-login",children:n.errors.files})})]})}),(0,N.jsx)(v.Ay,{item:!0,xs:12,children:(0,N.jsx)(B.A,{children:(0,N.jsx)(h.A,{fullWidth:!0,variant:"contained",type:"submit",children:"Save"})})})]})})})})]})})};var G=r(36080),K=r(86817),J=r(33738),U=r(43974),Z=r(37322),Q=r(16243),ee=r(26115),ie=r(72906);const re=(e,i)=>{const r=i.palette.mode===Q.lG.DARK?i.palette.background.paper+90:i.palette.primary.lighter+99;return{backgroundColor:e?r:"transparent",userSelect:"none"}},le=e=>{let{itemId:i,index:r}=e;const s=(0,n.A)(),{backlogs:t}=(0,q.Yj)(),o=null===t||void 0===t?void 0:t.items.filter((e=>e.id===i))[0],c=null===t||void 0===t?void 0:t.columns.filter((e=>e.itemIds.filter((e=>e===o.id))[0]))[0],h=null===t||void 0===t?void 0:t.profiles.filter((e=>e.id===o.assign))[0],x=()=>{(0,q.AJ)(i)},[p,m]=(0,l.useState)(null),g=e=>{m(null===e||void 0===e?void 0:e.currentTarget)},v=()=>{m(null)},[y,f]=(0,l.useState)(!1),w=e=>{f(!1),e&&((0,q.c1)(o.id),(0,E.aN)({open:!0,message:"Task Deleted successfully",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"success"}}))};return(0,N.jsx)(u.sx,{draggableId:o.id,index:r,children:(e,i)=>(0,N.jsxs)(a.A,{hover:!0,...e.draggableProps,...e.dragHandleProps,ref:e.innerRef,sx:{"& th,& td":{whiteSpace:"nowrap"},"& .more-button":{opacity:0},":hover":{"& .more-button":{opacity:1}},...Boolean(p)&&{"& .more-button":{opacity:1}},...re(i.isDragging,s)},children:[(0,N.jsx)(d.A,{sx:{pl:3,minWidth:120,width:120,height:46}}),(0,N.jsx)(d.A,{sx:{width:110,minWidth:110},children:(0,N.jsxs)(A.A,{direction:"row",spacing:.75,alignItems:"center",children:[(0,N.jsx)(ee.A,{style:{color:s.palette.info.main,marginTop:-2}}),(0,N.jsx)(j.A,{variant:"subtitle2",children:o.id})]})}),(0,N.jsx)(d.A,{sx:{maxWidth:"calc(100vw - 850px)",minWidth:140},component:"th",scope:"row",children:(0,N.jsx)(G.A,{underline:"hover",color:"default",onClick:x,sx:{overflow:"hidden",display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",":hover":{color:"info.main"},cursor:"pointer"},children:o.title})}),(0,N.jsxs)(d.A,{sx:{width:60,minWidth:60},children:[(0,N.jsx)(R.A,{className:"more-button",size:"small",onClick:g,"aria-controls":"menu-comment","aria-haspopup":"true",color:"secondary",children:(0,N.jsx)(ie.A,{style:{color:s.palette.text.primary}})}),(0,N.jsxs)(K.A,{id:"menu-comment",anchorEl:p,keepMounted:!0,open:Boolean(p),onClose:v,variant:"selectedMenu",anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[(0,N.jsx)(k.A,{onClick:()=>{v(),x()},children:"Edit"}),(0,N.jsx)(k.A,{onClick:()=>{v(),f(!0)},children:"Delete"})]}),(0,N.jsx)(Z.A,{title:o.title,open:y,handleClose:w})]}),(0,N.jsx)(d.A,{sx:{width:90,minWidth:90},children:c?c.title:"New"}),(0,N.jsx)(d.A,{sx:{width:140,minWidth:140},children:h?h.name:""}),(0,N.jsx)(d.A,{sx:{width:85,minWidth:85,textTransform:"capitalize"},children:o.priority}),(0,N.jsx)(d.A,{sx:{width:120,minWidth:120},children:o.dueDate?(0,U.A)(new Date(o.dueDate),"d MMM yyyy"):""})]},o.id)})},ne=new V.Chance,se=r(40630),te=O.Ik({title:O.Yj().required("Task title is required"),dueDate:O.p6().required("Due date is required").nullable()}),oe=e=>{let{open:i,handleDrawerOpen:r,storyId:l}=e;const{backlogs:n}=(0,q.Yj)(),s=(0,P.Wx)({initialValues:{id:"",title:"",assign:null,priority:"low",dueDate:null,description:"",commentIds:"",image:!1,storyId:"",columnId:null===n||void 0===n?void 0:n.columns[0].id,files:[]},enableReinitialize:!0,validationSchema:te,onSubmit:(e,i)=>{let{resetForm:n}=i;const s={id:e.id||`${ne.integer({min:1e3,max:9999})}`,title:e.title,assign:e.assign,priority:e.priority,dueDate:e.dueDate?new Date(e.dueDate):new Date,description:e.description,commentIds:e.commentIds,image:e.image};(0,q.B5)(e.columnId,s,l),(0,E.aN)({open:!0,message:"Submit Success",variant:"alert",alert:{color:"success"}}),r(),n()}});return(0,N.jsx)(p.Ay,{sx:{ml:i?3:0,flexShrink:0,zIndex:1200,overflowX:"hidden",width:{xs:320,md:450},"& .MuiDrawer-paper":{width:{xs:320,md:450},border:"none",borderRadius:"0px"}},variant:"temporary",anchor:"right",open:i,ModalProps:{keepMounted:!0},onClose:r,children:i&&(0,N.jsxs)(H.A,{sx:{overflowX:"hidden",height:"100vh"},children:[(0,N.jsx)(m.A,{sx:{p:3},children:(0,N.jsxs)(A.A,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,N.jsx)(j.A,{variant:"h4",children:"Add Task"}),(0,N.jsx)(c.A,{title:"Close",children:(0,N.jsx)(R.A,{color:"secondary",onClick:r,size:"small",sx:{fontSize:"0.875rem"},children:(0,N.jsx)(L.A,{})})})]})}),(0,N.jsx)(g.A,{}),(0,N.jsx)(m.A,{sx:{p:3},children:(0,N.jsx)("form",{onSubmit:s.handleSubmit,children:(0,N.jsx)(z.$,{dateAdapter:W.h,children:(0,N.jsxs)(v.Ay,{container:!0,spacing:2.5,children:[(0,N.jsx)(v.Ay,{item:!0,xs:12,children:(0,N.jsxs)(A.A,{spacing:1,children:[(0,N.jsx)(y.A,{children:"Title"}),(0,N.jsx)(f.A,{fullWidth:!0,id:"title",name:"title",placeholder:"Title",value:s.values.title,onChange:s.handleChange,error:s.touched.title&&Boolean(s.errors.title),helperText:s.touched.title&&s.errors.title})]})}),(0,N.jsx)(v.Ay,{item:!0,xs:12,children:(0,N.jsxs)(A.A,{spacing:1,children:[(0,N.jsx)(y.A,{children:"Assign to"}),(0,N.jsx)(w.A,{id:"assign",value:(null===n||void 0===n?void 0:n.profiles.find((e=>e.id===s.values.assign)))||null,onChange:(e,i)=>{s.setFieldValue("assign",null===i||void 0===i?void 0:i.id)},options:null===n||void 0===n?void 0:n.profiles,fullWidth:!0,autoHighlight:!0,getOptionLabel:e=>e.name,isOptionEqualToValue:e=>e.id===s.values.assign,renderOption:(e,i)=>(0,N.jsxs)(m.A,{component:"li",sx:{"& > img":{mr:2,flexShrink:0}},...e,children:[(0,N.jsx)("img",{loading:"lazy",width:"20",src:se(`./${i.avatar}`),alt:""}),i.name]}),renderInput:e=>(0,N.jsx)(f.A,{...e,placeholder:"Choose a assignee",inputProps:{...e.inputProps,autoComplete:"new-password"}})})]})}),(0,N.jsx)(v.Ay,{item:!0,xs:12,children:(0,N.jsxs)(A.A,{spacing:1,children:[(0,N.jsx)(y.A,{children:"Prioritize"}),(0,N.jsx)(b.A,{children:(0,N.jsxs)(C.A,{row:!0,"aria-label":"color",value:s.values.priority,onChange:s.handleChange,name:"priority",id:"priority",children:[(0,N.jsx)(D.A,{value:"low",control:(0,N.jsx)(S.A,{color:"primary",sx:{color:"primary.main"}}),label:"Low"}),(0,N.jsx)(D.A,{value:"medium",control:(0,N.jsx)(S.A,{color:"warning",sx:{color:"warning.main"}}),label:"Medium"}),(0,N.jsx)(D.A,{value:"high",control:(0,N.jsx)(S.A,{color:"error",sx:{color:"error.main"}}),label:"High"})]})})]})}),(0,N.jsxs)(v.Ay,{item:!0,xs:12,children:[(0,N.jsxs)(A.A,{spacing:1,children:[(0,N.jsx)(y.A,{children:"Due date"}),(0,N.jsx)(M.T,{value:s.values.dueDate,format:"dd/MM/yyyy",onChange:e=>{s.setFieldValue("dueDate",e)}})]}),s.touched.dueDate&&s.errors.dueDate&&(0,N.jsx)(T.A,{error:!0,children:s.errors.dueDate})]}),(0,N.jsx)(v.Ay,{item:!0,xs:12,children:(0,N.jsxs)(A.A,{spacing:1,children:[(0,N.jsx)(y.A,{children:"Description"}),(0,N.jsx)(f.A,{fullWidth:!0,id:"description",name:"description",multiline:!0,rows:3,value:s.values.description,onChange:s.handleChange,error:s.touched.description&&Boolean(s.errors.description),helperText:s.touched.description&&s.errors.description})]})}),(0,N.jsx)(v.Ay,{item:!0,xs:12,children:(0,N.jsxs)(A.A,{spacing:1,children:[(0,N.jsx)(y.A,{children:"State"}),(0,N.jsx)(b.A,{fullWidth:!0,sx:{m:1},children:(0,N.jsx)(I.A,{id:"columnId",name:"columnId",displayEmpty:!0,value:s.values.columnId,onChange:s.handleChange,inputProps:{"aria-label":"Without label"},children:null===n||void 0===n?void 0:n.columns.map(((e,i)=>(0,N.jsx)(k.A,{value:e.id,children:e.title},i)))})})]})}),(0,N.jsx)(v.Ay,{item:!0,xs:12,children:(0,N.jsxs)(v.Ay,{container:!0,spacing:1,children:[(0,N.jsx)(v.Ay,{item:!0,xs:12,children:(0,N.jsx)(y.A,{sx:{mt:.5},children:"Attachments:"})}),(0,N.jsx)(v.Ay,{item:!0,xs:12,children:(0,N.jsx)(F.A,{type:"STANDARD",showList:!0,setFieldValue:s.setFieldValue,files:s.values.files,error:s.touched.files&&!!s.errors.files})}),s.touched.files&&s.errors.files&&(0,N.jsx)(v.Ay,{item:!0,xs:12,children:(0,N.jsx)(T.A,{error:!0,id:"standard-weight-helper-text-password-login",children:s.errors.files})})]})}),(0,N.jsx)(v.Ay,{item:!0,xs:12,children:(0,N.jsx)(B.A,{children:(0,N.jsx)(h.A,{fullWidth:!0,variant:"contained",type:"submit",children:"Save"})})})]})})})})]})})};var ae=r(97694),de=r(82470),ce=r(58168);const he={icon:function(e,i){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z",fill:e}},{tag:"path",attrs:{d:"M184 840h656V184H184v656zm136-352c0-4.4 3.6-8 8-8h152V328c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v152h152c4.4 0 8 3.6 8 8v48c0 4.4-3.6 8-8 8H544v152c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V544H328c-4.4 0-8-3.6-8-8v-48z",fill:i}},{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z",fill:e}}]}},name:"plus-square",theme:"twotone"};var xe=r(40683),ue=function(e,i){return l.createElement(xe.A,(0,ce.A)({},e,{ref:i,icon:he}))};const pe=l.forwardRef(ue);var me=r(94889),Ae=r(79843),je=r(91733);const ge=(e,i,r)=>{let l="transparent";return r&&(l=i.palette.mode===Q.lG.DARK?i.palette.background.default:i.palette.secondary.lighter),e&&(l=i.palette.mode===Q.lG.DARK?i.palette.background.default:i.palette.primary.lighter),{backgroundColor:l,userSelect:"none"}},ve=e=>{let{story:i,index:r}=e;const o=(0,n.A)(),{backlogs:h}=(0,q.Yj)(),[p,g]=l.useState(0===r),v=null===h||void 0===h?void 0:h.columns.filter((e=>e.id===i.columnId))[0],y=null===h||void 0===h?void 0:h.profiles.filter((e=>e.id===i.assign))[0],[f,w]=(0,l.useState)(!1),b=()=>{w((e=>!e))},[C,D]=(0,l.useState)(!1),S=()=>{D((e=>!e))},[I,T]=(0,l.useState)(null),W=e=>{T(null===e||void 0===e?void 0:e.currentTarget)},z=()=>{T(null)},[M,O]=(0,l.useState)(!1),V=e=>{O(!1),e&&((0,q.RZ)(i.id),(0,E.aN)({open:!0,message:"Task Deleted successfully",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"success"}}))};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(u.sx,{draggableId:i.id,index:r,children:(e,r)=>(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(a.A,{hover:!0,...e.draggableProps,...e.dragHandleProps,ref:e.innerRef,sx:{...ge(r.isDragging,o,p),...!p&&{"& .MuiTableCell-root":{border:"none"}}},children:[(0,N.jsx)(d.A,{sx:{pl:3,minWidth:120,width:120,height:46},children:(0,N.jsxs)(A.A,{direction:"row",spacing:.5,alignItems:"center",children:[(0,N.jsx)(c.A,{title:"Add Task",children:(0,N.jsx)(R.A,{"aria-label":"expand row",onClick:b,size:"small",sx:{fontSize:"1.15rem"},children:(0,N.jsx)(pe,{color:o.palette.primary.main})})}),(0,N.jsx)(R.A,{"aria-label":"expand row",size:"small",onClick:()=>g(!p),color:"secondary",children:p?(0,N.jsx)(me.A,{}):(0,N.jsx)(Ae.A,{})})]})}),(0,N.jsx)(d.A,{sx:{width:110,minWidth:110},children:(0,N.jsxs)(A.A,{direction:"row",spacing:.75,alignItems:"center",children:[(0,N.jsx)(je.A,{style:{color:o.palette.primary.main,marginTop:-2}}),(0,N.jsx)(j.A,{variant:"subtitle2",children:i.id})]})}),(0,N.jsx)(d.A,{sx:{maxWidth:"calc(100vw - 850px)",minWidth:140},component:"th",scope:"row",children:(0,N.jsx)(G.A,{underline:"hover",color:"default",onClick:S,sx:{overflow:"hidden",display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",":hover":{color:"primary.main"},cursor:"pointer"},children:i.title})}),(0,N.jsxs)(d.A,{sx:{width:60,minWidth:60},children:[(0,N.jsx)(R.A,{size:"small","aria-controls":"menu-comment",onClick:W,"aria-haspopup":"true",color:"secondary",children:(0,N.jsx)(ie.A,{style:{color:o.palette.text.primary}})}),(0,N.jsxs)(K.A,{id:"menu-comment",anchorEl:I,keepMounted:!0,open:Boolean(I),onClose:z,variant:"selectedMenu",anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[(0,N.jsx)(k.A,{onClick:()=>{z(),S()},children:"Edit"}),(0,N.jsx)(k.A,{onClick:()=>{z(),O(!0)},children:"Delete"})]}),(0,N.jsx)(de.A,{title:i.title,open:M,handleClose:V})]}),(0,N.jsx)(d.A,{sx:{width:90,minWidth:90},children:v?v.title:""}),(0,N.jsx)(d.A,{sx:{width:140,minWidth:140},children:y?y.name:""}),(0,N.jsx)(d.A,{sx:{width:85,minWidth:85,textTransform:"capitalize"},children:i.priority}),(0,N.jsx)(d.A,{sx:{width:120,minWidth:120},children:i.dueDate?(0,U.A)(new Date(i.dueDate),"d MMM yyyy"):""})]}),(0,N.jsx)(u.gL,{droppableId:i.id,type:"item",children:(e,r)=>{var l;return(0,N.jsx)(a.A,{ref:e.innerRef,...e.droppableProps,sx:(r.isDraggingOver,{background:"transparent"}),children:(0,N.jsx)(d.A,{style:{padding:0},colSpan:8,children:(0,N.jsx)(J.A,{in:p,timeout:"auto",unmountOnExit:!0,children:p&&(0,N.jsx)(m.A,{sx:{margin:0},children:(0,N.jsx)(s.A,{children:(0,N.jsx)(t.A,{size:"small","aria-label":"purchases",children:(0,N.jsxs)(x.A,{children:[null===(l=i.itemIds)||void 0===l?void 0:l.map(((e,i)=>(0,N.jsx)(le,{itemId:e,index:i},e))),e.placeholder]})})})})})})})}})]})}),(0,N.jsx)(ae.A,{story:i,open:C,handleDrawerOpen:()=>{D((e=>!e))}}),(0,N.jsx)(oe,{open:f,handleDrawerOpen:()=>{w((e=>!e))},storyId:i.id})]})};var ye=r(75423),fe=r(44967),we=r(8750);const be=(e,i)=>({background:e?i.palette.secondary.lighter+65:"transparent"}),Ce=()=>{const e=(0,n.A)(),{backlogs:i}=(0,q.Yj)(),[r,p]=(0,l.useState)(!1),m=()=>{p((e=>!e))};return(0,N.jsx)(fe.A,{content:!1,children:(0,N.jsxs)(s.A,{sx:{"& .MuiTableCell-root":{p:1.25}},children:[(0,N.jsx)(u.JY,{onDragEnd:e=>{let r;const{source:l,destination:n,draggableId:s,type:t}=e;if(!n)return;if(n.droppableId===l.droppableId&&n.index===l.index)return;if("user-story"===t){const e=Array.from(null===i||void 0===i?void 0:i.userStoryOrder);return e.splice(l.index,1),e.splice(null===n||void 0===n?void 0:n.index,0,s),void(0,q.Pi)(e)}const o=null===i||void 0===i?void 0:i.userStory.filter((e=>e.id===l.droppableId))[0],a=null===i||void 0===i?void 0:i.userStory.filter((e=>e.id===n.droppableId))[0];if(o===a){const e=Array.from(o.itemIds);e.splice(l.index,1),e.splice(n.index,0,s);const t={...o,itemIds:e};r=null===i||void 0===i?void 0:i.userStory.map((e=>e.id===t.id?t:e))}else{const e=Array.from(o.itemIds);e.splice(l.index,1);const t={...o,itemIds:e},d=Array.from(a.itemIds);d.splice(n.index,0,s);const c={...a,itemIds:d};r=null===i||void 0===i?void 0:i.userStory.map((e=>e.id===t.id?t:e.id===c.id?c:e))}(0,q.ul)(r)},children:(0,N.jsx)(u.gL,{droppableId:"user-story",type:"user-story",children:(r,l)=>(0,N.jsxs)(t.A,{size:"small","aria-label":"collapsible table",...r.droppableProps,ref:r.innerRef,sx:be(l.isDraggingOver,e),children:[(0,N.jsx)(o.A,{sx:{bgcolor:e.palette.background.paper,borderTop:"none",borderBottomWidth:"1px","& th,& td":{whiteSpace:"nowrap"}},children:(0,N.jsxs)(a.A,{children:[(0,N.jsx)(d.A,{sx:{pl:3},children:(0,N.jsx)(c.A,{title:"Add User Story",children:(0,N.jsx)(h.A,{variant:"dashed",size:"extraSmall",color:"secondary",onClick:m,endIcon:(0,N.jsx)(we.A,{}),children:"ADD"})})}),(0,N.jsx)(d.A,{children:"Id"}),(0,N.jsx)(d.A,{children:"Title"}),(0,N.jsx)(d.A,{}),(0,N.jsx)(d.A,{children:"State"}),(0,N.jsx)(d.A,{children:"Assigned To"}),(0,N.jsx)(d.A,{children:"Priority"}),(0,N.jsx)(d.A,{children:"Due Date"})]})}),(0,N.jsxs)(x.A,{sx:{"& th,& td":{whiteSpace:"nowrap"},"& .MuiTableRow-root:last-of-type .MuiTable-root .MuiTableCell-root":{borderBottom:`1px solid ${e.palette.divider}`},"& .MuiTableRow-root:hover":{bgcolor:"transparent"}},children:[null===i||void 0===i?void 0:i.userStoryOrder.map(((e,r)=>{const l=null===i||void 0===i?void 0:i.userStory.filter((i=>i.id===e))[0];return(0,N.jsx)(ve,{story:l,index:r},l.id)})),r.placeholder]})]})})}),(0,N.jsx)(_,{open:r,handleDrawerOpen:()=>{p((e=>!e))}}),(0,N.jsx)(ye.A,{})]})})}}}]);