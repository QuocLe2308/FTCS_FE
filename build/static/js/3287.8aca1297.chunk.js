"use strict";(self.webpackChunkmantis_material_react=self.webpackChunkmantis_material_react||[]).push([[3287],{1808:(e,t,n)=>{n.d(t,{Ah:()=>d,Bz:()=>c,Fs:()=>u,VD:()=>x,_N:()=>o,dk:()=>h});var s=n(69572),a=n(9950),r=n(97108),l=n(81032);const i={key:"/api/schedule",list:"/all",insert:"/create",update:"/update",delete:"/delete",getByAccountId:"/listSchedule",tripAgreement:"/api/trip-agreement"};function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const n=`${l.J}${i.key}${i.list}?page=${e}&size=${t}`,{data:o,isLoading:c,error:d,isValidating:h}=(0,s.Ay)(n,r.GO,{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1}),u=()=>(0,s.Tk)(n);return(0,a.useMemo)((()=>{var e,t,n,s,a;return{schedules:(null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.content)||[],totalPages:null===o||void 0===o||null===(t=o.data)||void 0===t?void 0:t.totalPages,totalElements:null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.totalElements,currentPage:null===o||void 0===o||null===(s=o.data)||void 0===s?void 0:s.number,schedulesLoading:c,schedulesError:d,schedulesValidating:h,schedulesEmpty:!c&&(!(null!==o&&void 0!==o&&null!==(a=o.data)&&void 0!==a&&a.content)||0===o.data.content.length),refetch:u}}),[o,d,c,h])}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;const o=e?`${l.J}${i.key}${i.getByAccountId}/${e}?page=${t}&size=${n}`:null,{data:c,isLoading:d,error:h,isValidating:u}=(0,s.Ay)(o,r.GO,{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1}),x=()=>(0,s.Tk)(o);return(0,a.useMemo)((()=>{var e,t,n,s,a;return{schedules:(null===c||void 0===c||null===(e=c.data)||void 0===e?void 0:e.content)||[],totalPages:null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.totalPages,totalElements:null===c||void 0===c||null===(n=c.data)||void 0===n?void 0:n.totalElements,currentPage:null===c||void 0===c||null===(s=c.data)||void 0===s?void 0:s.number,schedulesLoading:d,schedulesError:h,schedulesValidating:u,schedulesEmpty:!d&&(!(null!==c&&void 0!==c&&null!==(a=c.data)&&void 0!==a&&a.content)||0===c.data.content.length),refetch:x}}),[c,h,d,u])}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;const o=e?`${l.J}${i.tripAgreement}/${e}?page=${t}&size=${n}`:null,{data:c,isLoading:d,error:h,isValidating:u}=(0,s.Ay)(o,r.GO,{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1}),x=()=>(0,s.Tk)(o);return(0,a.useMemo)((()=>{var e,t,n,s,a;return{tripAgreements:(null===c||void 0===c||null===(e=c.data)||void 0===e?void 0:e.content)||[],totalPages:null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.totalPages,totalElements:null===c||void 0===c||null===(n=c.data)||void 0===n?void 0:n.totalElements,currentPage:null===c||void 0===c||null===(s=c.data)||void 0===s?void 0:s.number,tripAgreementsLoading:d,tripAgreementsError:h,tripAgreementsValidating:u,tripAgreementsEmpty:!d&&(!(null!==c&&void 0!==c&&null!==(a=c.data)&&void 0!==a&&a.content)||0===c.data.content.length),refetch:x}}),[c,h,d,u])}async function h(e){(0,s.Tk)(i.key+i.list,(t=>{const n={scheduleId:Math.max(...t.data.map((e=>e.scheduleId)))+1||1,...e};return{...t,data:[...t.data,n]}}),!1)}async function u(e,t){(0,s.Tk)(i.key+i.list,(n=>{const s=n.data.map((n=>n.scheduleId===e?{...n,...t}:n));return{...n,data:s}}),!1)}async function x(e){(0,s.Tk)(i.key+i.list,(t=>{const n=t.data.filter((t=>t.scheduleId!==e));return{...t,data:n}}),!1)}},63287:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ae});var s=n(9950),a=n(28429),r=n(42074),l=n(14857),i=n(93230),o=n(18216),c=n(1320),d=n(15769),h=n(69780),u=n(9213),x=n(68605),g=n(16491),p=n(34075),A=n(74745),m=n(25979),j=n(70006),v=n(23266),y=n(46589),C=n(96583),b=n(40033),S=n(82053),I=n(25277),k=n(2660),D=n(2046),f=n(28170),w=n(66699),L=n(2235),T=n(79739),E=n(53065),P=n(65313),N=n(44967),F=n(86263),V=n(32778),M=n(16304),W=n(41394),$=n(1808),z=n(8750),O=n(44070),R=n(12678),K=n(24513),_=n(29120),B=n(60899),q=n(19647),G=n(8145),H=n(83563),J=n(24516),Y=n(45818),U=n(29714),Q=n(81831),X=n(34102),Z=n(89400),ee=n(91807),te=n(37476),ne=n(46007),se=n(36256),ae=n(44414);const re=e=>{let{id:t,open:n,handleClose:s}=e;return(0,ae.jsx)(C.A,{open:n,onClose:s,keepMounted:!0,TransitionComponent:te.s,maxWidth:"xs","aria-labelledby":"schedule-delete-title","aria-describedby":"schedule-delete-description",children:(0,ae.jsx)(f.A,{sx:{mt:2,my:1},children:(0,ae.jsxs)(i.A,{alignItems:"center",spacing:3.5,children:[(0,ae.jsx)(ne.A,{color:"error",sx:{width:72,height:72,fontSize:"1.75rem"},children:(0,ae.jsx)(se.A,{})}),(0,ae.jsxs)(i.A,{spacing:2,children:[(0,ae.jsx)(S.A,{variant:"h4",align:"center",children:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a l\u1ecbch tr\xecnh n\xe0y kh\xf4ng?"}),(0,ae.jsx)(S.A,{align:"center",children:"B\u1ea1n s\u1ebd kh\xf4ng th\u1ec3 kh\xf4i ph\u1ee5c l\u1ea1i sau khi x\xf3a. B\u1ea1n c\xf3 mu\u1ed1n ti\u1ebfp t\u1ee5c kh\xf4ng?"})]}),(0,ae.jsxs)(i.A,{direction:"row",spacing:2,sx:{width:1},children:[(0,ae.jsx)(o.A,{fullWidth:!0,onClick:s,color:"secondary",variant:"outlined",children:"Cancel"}),(0,ae.jsx)(o.A,{fullWidth:!0,color:"error",variant:"contained",onClick:async()=>{await(0,$.VD)(t).then((()=>{(0,ee.aN)({open:!0,message:"X\xf3a l\u1ecbch tr\xecnh th\xe0nh c\xf4ng!",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"success"}}),s()}))},autoFocus:!0,children:"Delete"})]})]})})})};var le=n(75830);const ie=e=>{const t={accountId:0,startLocation:"",endLocation:"",startLocationAddress:"",endLocationAddress:"",startDate:new Date,endDate:new Date,vehicleId:null,availableCapacity:0,status:"PENDING",notes:""};return e?{...t,...e}:t},oe=["PENDING","GETTING_TO_THE_POINT","IN_TRANSIT","COMPLETED","CANCELLED"],ce=e=>{let{schedule:t,closeModal:n}=e;const[a,r]=(0,s.useState)(!1),l=U.Ik().shape({accountId:U.ai().required("Account ID is required"),startLocationAddress:U.Yj().required("Start Location Address is required"),endLocationAddress:U.Yj().required("End Location Address is required"),startDate:U.p6().required("Start Date is required"),endDate:U.p6().required("End Date is required").min(U.KR("startDate"),"End Date must be after Start Date"),availableCapacity:U.ai().min(0,"Capacity must be non-negative"),status:U.Yj().required("Status is required")}),i=(0,Y.Wx)({initialValues:ie(t),validationSchema:l,enableReinitialize:!0,onSubmit:async(e,s)=>{let{setSubmitting:a}=s;try{t?await(0,$.Fs)(t.scheduleId,e).then((()=>{(0,ee.aN)({open:!0,message:"Schedule updated successfully.",variant:"alert",alert:{color:"success"}}),a(!1),n()})):await(0,$.dk)(e).then((()=>{(0,ee.aN)({open:!0,message:"Schedule added successfully.",variant:"alert",alert:{color:"success"}}),a(!1),n()}))}catch(r){console.error(r)}}}),{errors:c,touched:d,handleSubmit:h,isSubmitting:u,getFieldProps:x,setFieldValue:g}=i;return(0,ae.jsxs)(Y.QI,{value:i,children:[(0,ae.jsx)(Q.$,{dateAdapter:X.h,children:(0,ae.jsxs)(Y.lV,{autoComplete:"off",noValidate:!0,onSubmit:h,children:[(0,ae.jsx)(b.A,{children:t?"Edit Schedule":"New Schedule"}),(0,ae.jsx)(A.A,{}),(0,ae.jsx)(f.A,{sx:{p:2.5},children:(0,ae.jsxs)(B.Ay,{container:!0,spacing:3,children:[(0,ae.jsx)(B.Ay,{item:!0,xs:12,sm:6,children:(0,ae.jsxs)(le.Stack,{spacing:1,children:[(0,ae.jsx)(q.A,{htmlFor:"schedule-accountId",children:"Account ID"}),(0,ae.jsx)(G.A,{fullWidth:!0,id:"schedule-accountId",type:"number",...x("accountId"),error:Boolean(d.accountId&&c.accountId),helperText:d.accountId&&c.accountId})]})}),(0,ae.jsx)(B.Ay,{item:!0,xs:12,sm:6,children:(0,ae.jsxs)(le.Stack,{spacing:1,children:[(0,ae.jsx)(q.A,{htmlFor:"schedule-status",children:"Status"}),(0,ae.jsxs)(m.A,{fullWidth:!0,children:[(0,ae.jsx)(j.A,{id:"schedule-status",...x("status"),onChange:e=>g("status",e.target.value),input:(0,ae.jsx)(k.A,{}),renderValue:e=>(0,ae.jsx)(S.A,{children:e}),children:oe.map((e=>(0,ae.jsx)(v.A,{value:e,children:(0,ae.jsx)(H.A,{primary:e})},e)))}),d.status&&c.status&&(0,ae.jsx)(J.A,{error:!0,children:c.status})]})]})}),(0,ae.jsx)(B.Ay,{item:!0,xs:12,children:(0,ae.jsxs)(le.Stack,{spacing:1,children:[(0,ae.jsx)(q.A,{htmlFor:"schedule-startLocationAddress",children:"Start Location Address"}),(0,ae.jsx)(G.A,{fullWidth:!0,id:"schedule-startLocationAddress",multiline:!0,rows:2,...x("startLocationAddress"),error:Boolean(d.startLocationAddress&&c.startLocationAddress),helperText:d.startLocationAddress&&c.startLocationAddress})]})}),(0,ae.jsx)(B.Ay,{item:!0,xs:12,children:(0,ae.jsxs)(le.Stack,{spacing:1,children:[(0,ae.jsx)(q.A,{htmlFor:"schedule-endLocationAddress",children:"End Location Address"}),(0,ae.jsx)(G.A,{fullWidth:!0,id:"schedule-endLocationAddress",multiline:!0,rows:2,...x("endLocationAddress"),error:Boolean(d.endLocationAddress&&c.endLocationAddress),helperText:d.endLocationAddress&&c.endLocationAddress})]})}),(0,ae.jsx)(B.Ay,{item:!0,xs:12,sm:6,children:(0,ae.jsxs)(le.Stack,{spacing:1,children:[(0,ae.jsx)(q.A,{htmlFor:"schedule-startDate",children:"Start Date"}),(0,ae.jsx)(Z.K,{value:i.values.startDate,onChange:e=>g("startDate",e),renderInput:e=>(0,ae.jsx)(G.A,{...e,error:Boolean(d.startDate&&c.startDate),helperText:d.startDate&&c.startDate})})]})}),(0,ae.jsx)(B.Ay,{item:!0,xs:12,sm:6,children:(0,ae.jsxs)(le.Stack,{spacing:1,children:[(0,ae.jsx)(q.A,{htmlFor:"schedule-endDate",children:"End Date"}),(0,ae.jsx)(Z.K,{value:i.values.endDate,onChange:e=>g("endDate",e),renderInput:e=>(0,ae.jsx)(G.A,{...e,error:Boolean(d.endDate&&c.endDate),helperText:d.endDate&&c.endDate})})]})}),(0,ae.jsx)(B.Ay,{item:!0,xs:12,sm:6,children:(0,ae.jsxs)(le.Stack,{spacing:1,children:[(0,ae.jsx)(q.A,{htmlFor:"schedule-availableCapacity",children:"Available Capacity"}),(0,ae.jsx)(G.A,{fullWidth:!0,id:"schedule-availableCapacity",type:"number",...x("availableCapacity"),error:Boolean(d.availableCapacity&&c.availableCapacity),helperText:d.availableCapacity&&c.availableCapacity})]})}),(0,ae.jsx)(B.Ay,{item:!0,xs:12,sm:6,children:(0,ae.jsxs)(le.Stack,{spacing:1,children:[(0,ae.jsx)(q.A,{htmlFor:"schedule-vehicleId",children:"Vehicle ID"}),(0,ae.jsx)(G.A,{fullWidth:!0,id:"schedule-vehicleId",...x("vehicleId"),error:Boolean(d.vehicleId&&c.vehicleId),helperText:d.vehicleId&&c.vehicleId})]})}),(0,ae.jsx)(B.Ay,{item:!0,xs:12,children:(0,ae.jsxs)(le.Stack,{spacing:1,children:[(0,ae.jsx)(q.A,{htmlFor:"schedule-notes",children:"Notes"}),(0,ae.jsx)(G.A,{fullWidth:!0,id:"schedule-notes",multiline:!0,rows:2,...x("notes"),error:Boolean(d.notes&&c.notes),helperText:d.notes&&c.notes})]})})]})}),(0,ae.jsx)(A.A,{}),(0,ae.jsx)(T.A,{sx:{p:2.5},children:(0,ae.jsxs)(B.Ay,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,ae.jsx)(B.Ay,{item:!0,children:t&&(0,ae.jsx)(F.A,{onClick:()=>r(!0),size:"large",color:"error",children:(0,ae.jsx)(se.A,{})})}),(0,ae.jsx)(B.Ay,{item:!0,children:(0,ae.jsxs)(le.Stack,{direction:"row",spacing:2,children:[(0,ae.jsx)(o.A,{color:"error",onClick:n,children:"Cancel"}),(0,ae.jsx)(o.A,{type:"submit",variant:"contained",disabled:u,children:t?"Edit":"Add"})]})})]})})]})}),t&&(0,ae.jsx)(re,{id:t.scheduleId,title:t.scheduleId,open:a,handleClose:()=>{r(!a),n()}})]})};var de=n(41492),he=n(65182);const ue=e=>{let{open:t,modalToggler:n,schedule:a}=e;const{schedulesLoading:r}=(0,$._N)(),l=()=>n(!1),i=(0,s.useMemo)((()=>!r&&(0,ae.jsx)(ce,{schedule:a||null,closeModal:l})),[a,r]);return(0,ae.jsx)(ae.Fragment,{children:t&&(0,ae.jsx)(_.A,{open:t,onClose:l,"aria-labelledby":"modal-schedule-add-label","aria-describedby":"modal-schedule-add-description",sx:{"& .MuiPaper-root:focus":{outline:"none"}},children:(0,ae.jsx)(N.A,{sx:{width:"calc(100% - 48px)",minWidth:340,maxWidth:880,height:"auto",maxHeight:"calc(100vh - 48px)"},modal:!0,content:!1,children:(0,ae.jsx)(de.A,{sx:{maxHeight:"calc(100vh - 48px)","& .simplebar-content":{display:"flex",flexDirection:"column"}},children:r?(0,ae.jsx)(g.A,{sx:{p:5},children:(0,ae.jsx)(le.Stack,{direction:"row",justifyContent:"center",children:(0,ae.jsx)(he.A,{})})}):i})})})})};var xe=n(35346);function ge(e){let{data:t,columns:n,modalToggler:a,totalPages:r,currentPage:l,onPageChange:y,pageSize:C,onPageSizeChange:b}=e;const[S,I]=(0,s.useState)([{id:"scheduleId",desc:!0}]),[k,D]=(0,s.useState)(""),f=(0,V.N4)({data:t,columns:n,state:{sorting:S,globalFilter:k},onSortingChange:I,onGlobalFilterChange:D,getCoreRowModel:(0,M.HT)(),getSortedRowModel:(0,M.h5)(),getFilteredRowModel:(0,M.hM)(),manualPagination:!0,pageCount:r,debugTable:!0}),w=n.filter((e=>e.accessorKey)).map((e=>({label:"string"===typeof e.header?e.header:"#",key:e.accessorKey})));return(0,ae.jsxs)(N.A,{content:!1,children:[(0,ae.jsxs)(i.A,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",justifyContent:"space-between",sx:{padding:2},children:[(0,ae.jsx)(W.iF,{value:null!==k&&void 0!==k?k:"",onFilterChange:e=>D(String(e)),placeholder:`Search ${t.length} schedules...`}),(0,ae.jsxs)(i.A,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",children:[(0,ae.jsx)(o.A,{variant:"contained",startIcon:(0,ae.jsx)(z.A,{}),onClick:a,children:"Th\xeam"}),(0,ae.jsx)(W.pK,{data:t,headers:w,filename:"schedule-list.csv"})]})]}),(0,ae.jsxs)(P.A,{children:[(0,ae.jsx)(c.A,{children:(0,ae.jsxs)(d.A,{children:[(0,ae.jsx)(h.A,{children:f.getHeaderGroups().map((e=>(0,ae.jsx)(u.A,{children:e.headers.map((e=>(0,ae.jsx)(x.A,{onClick:e.column.getToggleSortingHandler(),sx:{cursor:e.column.getCanSort()?"pointer":"default"},children:(0,ae.jsxs)(i.A,{direction:"row",spacing:1,alignItems:"center",children:[(0,ae.jsx)(g.A,{children:(0,V.Kv)(e.column.columnDef.header,e.getContext())}),e.column.getCanSort()&&(0,ae.jsx)(W.gT,{column:e.column})]})},e.id)))},e.id)))}),(0,ae.jsx)(p.A,{children:f.getRowModel().rows.map((e=>(0,ae.jsx)(u.A,{children:e.getVisibleCells().map((e=>(0,ae.jsx)(x.A,{children:(0,V.Kv)(e.column.columnDef.cell,e.getContext())},e.id)))},e.id)))})]})}),(0,ae.jsx)(A.A,{}),(0,ae.jsx)(g.A,{sx:{p:2},children:(0,ae.jsxs)(i.A,{direction:"row",spacing:2,justifyContent:"space-between",alignItems:"center",sx:{width:"100%"},children:[(0,ae.jsx)(g.A,{children:(0,ae.jsx)(m.A,{variant:"standard",sx:{minWidth:100},children:(0,ae.jsx)(j.A,{value:C,onChange:e=>{const t=Number(e.target.value);b(t)},label:"Rows per page",displayEmpty:!0,inputProps:{"aria-label":"Rows per page"},children:[5,10,25,50].map((e=>(0,ae.jsxs)(v.A,{value:e,children:[e," rows"]},e)))})})}),(0,ae.jsxs)(i.A,{direction:"row",spacing:1,alignItems:"center",children:[(0,ae.jsx)(o.A,{variant:"text",disabled:0===l,onClick:()=>{l>0&&y(l-1)},children:"Previous"}),(0,ae.jsxs)(g.A,{children:["Page"," ",(0,ae.jsxs)("strong",{children:[l+1," of ",Math.max(1,r)]})]}),(0,ae.jsx)(o.A,{variant:"text",disabled:l>=r-1,onClick:()=>{l<r-1&&y(l+1)},children:"Next"})]})]})})]})]})}const pe=e=>{let{open:t,onClose:n,scheduleId:a}=e;const r=(0,l.A)(),m=(0,y.A)(r.breakpoints.down("md")),[j,v]=(0,s.useState)(""),{tripAgreements:E,tripAgreementsLoading:P}=(0,$.Ah)(a,0,10),N=(0,s.useMemo)((()=>E?E.filter((e=>e.id.toString().includes(j)||e.bookingId.toString().includes(j)||e.driverId.toString().includes(j)||e.customerId.toString().includes(j)||e.paymentStatus.toLowerCase().includes(j.toLowerCase())||e.agreementStatus.toLowerCase().includes(j.toLowerCase()))):[]),[E,j]),V=function(e){return"payment"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"payment")?{PAID:{color:r.palette.success.main,backgroundColor:r.palette.success.lighter,icon:"\ud83d\udcb0"},PAIR:{color:r.palette.warning.main,backgroundColor:r.palette.warning.lighter,icon:"\u231b"},UNPAID:{color:r.palette.error.main,backgroundColor:r.palette.error.lighter,icon:"\u274c"}}[e]||{color:r.palette.grey[500],backgroundColor:r.palette.grey[100],icon:"\u2753"}:{COMPLETED:{color:r.palette.success.main,backgroundColor:r.palette.success.lighter,icon:"\u2705"},IN_TRANSIT:{color:r.palette.info.main,backgroundColor:r.palette.info.lighter,icon:"\ud83d\ude9a"},CANCELLED:{color:r.palette.error.main,backgroundColor:r.palette.error.lighter,icon:"\ud83d\udeab"}}[e]||{color:r.palette.grey[500],backgroundColor:r.palette.grey[100],icon:"\u2753"}};return(0,ae.jsxs)(C.A,{open:t,onClose:n,maxWidth:"lg",fullWidth:!0,fullScreen:m,PaperProps:{sx:{borderRadius:2,boxShadow:r.customShadows.z24}},children:[(0,ae.jsxs)(b.A,{children:[(0,ae.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[(0,ae.jsxs)(i.A,{direction:"row",spacing:2,alignItems:"center",children:[(0,ae.jsx)(S.A,{variant:"h4",sx:{color:r.palette.primary.main},children:"Trip Agreements"}),(0,ae.jsx)(I.A,{label:(null===E||void 0===E?void 0:E.length)||0,color:"primary",size:"small",sx:{borderRadius:"16px"}})]}),(0,ae.jsx)(F.A,{onClick:n,color:"error",size:"small",children:(0,ae.jsx)(O.A,{})})]}),(0,ae.jsx)(k.A,{fullWidth:!0,placeholder:"Search agreements...",value:j,onChange:e=>v(e.target.value),sx:{mt:2},startAdornment:(0,ae.jsx)(D.A,{position:"start",children:(0,ae.jsx)(R.A,{style:{color:r.palette.grey[500]}})})})]}),(0,ae.jsx)(A.A,{}),(0,ae.jsx)(f.A,{sx:{p:2},children:P?(0,ae.jsx)(g.A,{sx:{width:"100%",mt:2},children:(0,ae.jsx)(w.A,{})}):(0,ae.jsx)(c.A,{component:L.A,elevation:0,sx:{borderRadius:2},children:(0,ae.jsxs)(d.A,{sx:{minWidth:800},children:[(0,ae.jsx)(h.A,{children:(0,ae.jsxs)(u.A,{children:[(0,ae.jsx)(x.A,{sx:{py:3,px:2,backgroundColor:r.palette.grey[50]},children:"Agreement Details"}),(0,ae.jsx)(x.A,{sx:{py:3,px:2,backgroundColor:r.palette.grey[50]},children:"Customer & Driver"}),(0,ae.jsx)(x.A,{sx:{py:3,px:2,backgroundColor:r.palette.grey[50]},children:"Status"}),(0,ae.jsx)(x.A,{sx:{py:3,px:2,backgroundColor:r.palette.grey[50]},children:"Trip Info"}),(0,ae.jsx)(x.A,{sx:{py:3,px:2,backgroundColor:r.palette.grey[50]},children:"Payment"})]})}),(0,ae.jsx)(p.A,{children:N.map((e=>{const t=V(e.paymentStatus,"payment"),n=V(e.agreementStatus,"agreement");return(0,ae.jsxs)(u.A,{hover:!0,children:[(0,ae.jsx)(x.A,{sx:{py:2,px:2},children:(0,ae.jsxs)(i.A,{spacing:1,children:[(0,ae.jsxs)(S.A,{variant:"subtitle1",color:"primary",children:["#",e.id]}),(0,ae.jsxs)(S.A,{variant:"caption",color:"textSecondary",children:["Created: ",new Date(e.createAt).toLocaleString()]})]})}),(0,ae.jsx)(x.A,{sx:{py:2,px:2},children:(0,ae.jsxs)(i.A,{spacing:1,children:[(0,ae.jsxs)(S.A,{variant:"body2",children:["Customer ID: ",(0,ae.jsx)("strong",{children:e.customerId})]}),(0,ae.jsxs)(S.A,{variant:"body2",children:["Driver ID: ",(0,ae.jsx)("strong",{children:e.driverId})]})]})}),(0,ae.jsx)(x.A,{sx:{py:2,px:2},children:(0,ae.jsxs)(i.A,{spacing:1,children:[(0,ae.jsx)(I.A,{icon:(0,ae.jsx)("span",{children:n.icon}),label:e.agreementStatus,sx:{color:n.color,backgroundColor:n.backgroundColor,"& .MuiChip-icon":{color:"inherit"}}}),(0,ae.jsx)(I.A,{icon:(0,ae.jsx)("span",{children:t.icon}),label:e.paymentStatus,sx:{color:t.color,backgroundColor:t.backgroundColor,"& .MuiChip-icon":{color:"inherit"}}})]})}),(0,ae.jsx)(x.A,{sx:{py:2,px:2},children:(0,ae.jsxs)(i.A,{spacing:1,children:[(0,ae.jsxs)(S.A,{variant:"body2",children:["Distance: ",(0,ae.jsxs)("strong",{children:[e.distance," km"]})]}),(0,ae.jsxs)(S.A,{variant:"body2",children:["Duration: ",(0,ae.jsxs)("strong",{children:[e.estimatedDuration," min"]})]})]})}),(0,ae.jsx)(x.A,{sx:{py:2,px:2},children:(0,ae.jsxs)(S.A,{variant:"h6",color:e.totalPrice>0?"success.main":"warning.main",sx:{fontWeight:600},children:[e.totalPrice.toLocaleString("vi-VN")," VND"]})})]},e.id)}))})]})})}),(0,ae.jsx)(A.A,{}),(0,ae.jsx)(T.A,{sx:{p:2.5},children:(0,ae.jsx)(o.A,{variant:"contained",onClick:n,color:"primary",startIcon:(0,ae.jsx)(O.A,{}),sx:{bgcolor:r.palette.grey[200],color:r.palette.grey[800],"&:hover":{bgcolor:r.palette.grey[300]}},children:"Close"})})]})},Ae=()=>{const e=(0,l.A)(),t=(0,a.Zp)(),[n]=(0,r.ok)(),[o,c]=(0,s.useState)(parseInt(n.get("page")||"0",10)),[d,h]=(0,s.useState)(parseInt(n.get("size")||"10",10)),[u,x]=(0,s.useState)(!1),[g,p]=(0,s.useState)(!1),[A,m]=(0,s.useState)(!1),[j,v]=(0,s.useState)(null),[y,C]=(0,s.useState)(""),[b,k]=(0,s.useState)(!1),[D,f]=(0,s.useState)(null),{schedules:w,schedulesLoading:L,schedulesError:T,totalPages:P,currentPage:V,refetch:M}=(0,$._N)(o,d),W=e=>{const s=new URLSearchParams(n);Object.entries(e).forEach((e=>{let[t,n]=e;null===n||""===n?s.delete(t):s.set(t,n)})),t(`?${s.toString()}`,{replace:!0})},z=()=>p(!g);(0,s.useEffect)((()=>{u&&(M(),x(!1))}),[u,M]);const _=(0,s.useMemo)((()=>[{header:"ID",accessorKey:"scheduleId"},{header:"ID t\u1ea3i kho\u1ea3n",accessorKey:"accountId"},{header:"\u0110i\u1ec3m \u0111\xf3n",accessorKey:"startLocationAddress",cell:e=>{let{getValue:t}=e;return(0,ae.jsx)(S.A,{children:t()})}},{header:"\u0110i\u1ec3m \u0111\u1ebfn",accessorKey:"endLocationAddress",cell:e=>{let{getValue:t}=e;return(0,ae.jsx)(S.A,{children:t()})}},{header:"Ng\xe0y b\u1eaft \u0111\u1ea7u",accessorKey:"startDate",cell:e=>{let{getValue:t}=e;return new Date(t()).toLocaleString()}},{header:"Ng\xe0y k\u1ebft th\xfac",accessorKey:"endDate",cell:e=>{let{getValue:t}=e;return new Date(t()).toLocaleString()}},{header:"Tr\u1ea1ng th\xe1i",accessorKey:"status",cell:e=>{let{getValue:t}=e;return(0,ae.jsx)(I.A,{color:"GETTING_TO_THE_POINT"===t()?"info":"COMPLETED"===t()?"success":"warning",label:t(),size:"small",variant:"light"})}},{header:"Actions",accessorKey:"actions",cell:e=>{let{row:t}=e;return(0,ae.jsxs)(i.A,{direction:"row",alignItems:"center",spacing:0,children:[(0,ae.jsx)(E.A,{title:"View Trip Agreements",children:(0,ae.jsx)(F.A,{color:"primary",onClick:()=>{f(t.original.scheduleId),k(!0)},children:(0,ae.jsx)(R.A,{})})}),(0,ae.jsx)(E.A,{title:"Edit",children:(0,ae.jsx)(F.A,{color:"primary",onClick:()=>{v(t.original),m(!0)},children:(0,ae.jsx)(K.A,{})})}),(0,ae.jsx)(E.A,{title:"Delete",children:(0,ae.jsx)(F.A,{color:"error",onClick:()=>{z(),C(t.original.scheduleId)},children:(0,ae.jsx)(O.A,{})})})]})}}]),[e]);return L?(0,ae.jsx)(xe.default,{}):T?(0,ae.jsxs)(S.A,{children:["Error loading schedules: ",T.message]}):(0,ae.jsxs)(N.A,{children:[(0,ae.jsx)(ge,{data:w||[],columns:_,totalPages:P||0,currentPage:V||0,onPageChange:e=>{c(e),W({page:e})},pageSize:d,onPageSizeChange:e=>{h(e),c(0),W({size:e,page:0})},modalToggler:()=>{m(!0),v(null)}}),(0,ae.jsx)(re,{id:y,title:y,open:g,handleClose:z,onDeleteSuccess:()=>x(!0)}),(0,ae.jsx)(ue,{open:A,modalToggler:m,schedule:j,onSuccess:()=>{x(!0),m(!1)}}),(0,ae.jsx)(pe,{open:b,onClose:()=>k(!1),scheduleId:D})]})}}}]);