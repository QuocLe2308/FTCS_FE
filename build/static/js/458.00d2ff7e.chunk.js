"use strict";(self.webpackChunkmantis_material_react=self.webpackChunkmantis_material_react||[]).push([[458],{80458:(e,t,r)=>{r.r(t),r.d(t,{default:()=>ve});var n=r(9950),i=r(46589),a=r(16491),l=r(96583),o=r(53065),s=r(1351),c=r(21072),d=r(88008),u=r(41668),p=r(27758),m=r(57327),h=r(42598),x=r(37476),v=r(59254),g=r(16243);const y=(0,v.Ay)("div")((e=>{let{theme:t}=e;return{width:"calc(100% + 2px)",marginLeft:-1,marginBottom:"-50px","& .fc-license-message":{display:"none"},"& .fc .fc-daygrid .fc-scroller-liquid-absolute":{overflow:"hidden !important"},"& .fc":{"--fc-bg-event-opacity":1,"--fc-border-color":t.palette.divider,"--fc-daygrid-event-dot-width":"10px","--fc-today-bg-color":t.palette.primary.lighter,"--fc-list-event-dot-width":"10px","--fc-event-border-color":t.palette.primary.dark,"--fc-now-indicator-color":t.palette.error.main,color:t.palette.text.primary,backgroundColor:t.palette.background.paper,fontFamily:t.typography.fontFamily},"& .fc .fc-daygrid-day-top":{display:"grid","& .fc-daygrid-day-number":{textAlign:"center",marginTop:12,marginBottom:12}},"& .fc .fc-col-header-cell":{backgroundColor:t.palette.grey[100]},"& .fc .fc-col-header-cell-cushion":{color:t.palette.grey[900],padding:16},"& .fc-direction-ltr .fc-daygrid-event.fc-event-end, .fc-direction-rtl .fc-daygrid-event.fc-event-start":{marginLeft:4,marginBottom:6,borderRadius:4,backgroundColor:t.palette.primary.main,border:"none"},"& .fc-h-event .fc-event-main":{padding:4,paddingLeft:8},"& .fc .fc-more-popover":{border:"none",borderRadius:6,zIndex:1200},"& .fc .fc-more-popover .fc-popover-body":{backgroundColor:t.palette.grey[200],borderBottomLeftRadius:4,borderBottomRightRadius:4},"& .fc .fc-popover-header":{padding:12,borderTopLeftRadius:4,borderTopRightRadius:4,backgroundColor:t.palette.grey[200],color:t.palette.text.primary},"& .fc-theme-standard .fc-list-day-cushion":{backgroundColor:t.palette.grey[100]},"& .fc .fc-day":{cursor:"pointer"},"& .fc .fc-timeGridDay-view .fc-timegrid-slot":{backgroundColor:t.palette.background.paper},"& .fc .fc-timegrid-slot":{cursor:"pointer"},"& .fc .fc-list-event:hover td":{cursor:"pointer",backgroundColor:t.palette.grey[100]},"& .fc-timegrid-event-harness-inset .fc-timegrid-event, .fc-timegrid-event.fc-event-mirror, .fc-timegrid-more-link":{padding:8,margin:2},...t.direction===g.NL.RTL&&{overflow:"hidden"}}}));var f=r(60899),A=r(18216),j=r(93230),b=r(82053),C=r(90158),k=r(43974),w=r(86263),D=r(92019),E=r(67727),M=r(58371),T=r(12114),S=r(75989),R=r(79843),F=r(44414);const z=[{label:"Month",value:"dayGridMonth",icon:D.A},{label:"Week",value:"timeGridWeek",icon:E.A},{label:"Day",value:"timeGridDay",icon:M.A},{label:"Agenda",value:"listWeek",icon:T.A}],L=e=>{let{date:t,view:r,onClickNext:a,onClickPrev:l,onClickToday:s,onChangeView:c,...d}=e;const u=(0,i.A)((e=>e.breakpoints.down("sm"))),[p,m]=(0,n.useState)(z);return(0,n.useEffect)((()=>{if(u){const e=z.filter((e=>"dayGridMonth"!==e.value&&"timeGridWeek"!==e.value));m(e)}else m(z)}),[u]),(0,F.jsxs)(f.Ay,{alignItems:"center",container:!0,justifyContent:"space-between",spacing:u?1:3,...d,sx:{pb:3},children:[(0,F.jsx)(f.Ay,{item:!0,children:(0,F.jsx)(A.A,{variant:"outlined",onClick:s,size:u?"small":"medium",children:"Today"})}),(0,F.jsx)(f.Ay,{item:!0,children:(0,F.jsxs)(j.A,{direction:"row",alignItems:"center",spacing:u?1:3,children:[(0,F.jsx)(w.A,{onClick:l,size:u?"small":"large",children:(0,F.jsx)(S.A,{})}),(0,F.jsx)(b.A,{variant:u?"h5":"h3",color:"textPrimary",children:(0,k.A)(t,"MMMM yyyy")}),(0,F.jsx)(w.A,{onClick:a,size:u?"small":"large",children:(0,F.jsx)(R.A,{})})]})}),(0,F.jsx)(f.Ay,{item:!0,children:(0,F.jsx)(C.A,{variant:"outlined","aria-label":"outlined button group",children:p.map((e=>{const t=e.icon;return(0,F.jsx)(o.A,{title:e.label,children:(0,F.jsx)(A.A,{size:u?"small":"medium",disableElevation:!0,variant:e.value===r?"contained":"outlined",onClick:()=>c(e.value),children:(0,F.jsx)(t,{style:{fontSize:"1.3rem"}})})},e.value)}))})})]})};var I=r(14857),V=r(40033),W=r(74745),B=r(28170),G=r(19647),P=r(8145),N=r(16497),Y=r(37324),_=r(2046),q=r(24516),O=r(25979),Q=r(58567),$=r(79739),H=r(81831),J=r(21073),K=r(34102),U=r(41397),X=r.n(U),Z=r(29714),ee=r(45818),te=r(77966),re=r(46007),ne=r(13239);const ie=e=>{let{color:t,value:r}=e;return(0,F.jsx)(o.A,{title:t,children:(0,F.jsx)(N.A,{value:r,label:"",control:(0,F.jsx)(te.A,{disableRipple:!0,icon:(0,F.jsx)(re.A,{variant:"rounded",type:"combined",size:"xs",sx:{backgroundColor:t,borderColor:"divider"},children:(0,F.jsx)(a.A,{sx:{display:"none"}})}),checkedIcon:(0,F.jsx)(re.A,{variant:"rounded",type:"combined",size:"xs",sx:{backgroundColor:t,color:"#000",borderColor:"divider"},children:(0,F.jsx)(ne.A,{})}),sx:{"&:hover":{bgcolor:"transparent"}}})})})};var ae=r(91807),le=r(69572),oe=r(67956),se=r(97108);const ce="api/calendar/events";async function de(e,t){(0,le.Tk)(ce,(r=>{const n=r.events.map((r=>r.id===e?{...r,...t}:r));return{...r,events:n}}),!1)}var ue=r(81419),pe=r(36256);const me=(e,t)=>{const r={title:"",description:"",color:"#1890ff",textColor:"#fff",allDay:!1,start:t?new Date(t.start):new Date,end:t?new Date(t.end):new Date};return e||t?X().merge({},r,e):r},he=e=>{let{event:t,range:r,onCancel:n,modalCallback:i}=e;const a=(0,I.A)(),l=!t,s=[{value:a.palette.primary.main,color:"primary.main"},{value:a.palette.error.main,color:"error.main"},{value:a.palette.success.main,color:"success.main"},{value:a.palette.secondary.main,color:"secondary.main"},{value:a.palette.warning.main,color:"warning.main"},{value:a.palette.primary.lighter,color:"primary.lighter"},{value:a.palette.error.lighter,color:"error.lighter"},{value:a.palette.success.lighter,color:"success.lighter"},{value:a.palette.secondary.lighter,color:"secondary.lighter"},{value:a.palette.warning.lighter,color:"warning.lighter"}],c=[{value:"#fff",color:"white"},{value:a.palette.error.lighter,color:"error.lighter"},{value:a.palette.success.lighter,color:"success.lighter"},{value:a.palette.secondary.lighter,color:"secondary.lighter"},{value:a.palette.warning.lighter,color:"warning.lighter"},{value:a.palette.primary.lighter,color:"primary.lighter"},{value:a.palette.primary.main,color:"primary.main"},{value:a.palette.error.main,color:"error.main"},{value:a.palette.success.main,color:"success.main"},{value:a.palette.secondary.main,color:"secondary.main"},{value:a.palette.warning.main,color:"warning.main"}],d=Z.Ik().shape({title:Z.Yj().max(255).required("Title is required"),description:Z.Yj().max(5e3),end:Z.p6().when("start",((e,t)=>e&&t.min(e,"End date must be later than start date"))),start:Z.p6(),color:Z.Yj().max(255),textColor:Z.Yj().max(255)}),u=(0,ee.Wx)({initialValues:me(t,r),validationSchema:d,onSubmit:async(e,r)=>{let{setSubmitting:n}=r;try{const r={title:e.title,description:e.description,color:e.color,textColor:e.textColor,allDay:e.allDay,start:e.start,end:e.end};t?(await de(t.id,r),(0,ae.aN)({open:!0,message:"Event update successfully.",variant:"alert",alert:{color:"success"}}),i(!1)):(await async function(e){(0,le.Tk)(ce,(t=>{const r=[...t.events,{...e,id:(0,oe.A)()}];return{...t,events:r}}),!1)}(r),(0,ae.aN)({open:!0,message:"Event added successfully.",variant:"alert",alert:{color:"success"}}),i(!1)),n(!1)}catch(a){console.error(a)}}}),{values:p,errors:m,touched:h,handleSubmit:x,isSubmitting:v,getFieldProps:g,setFieldValue:y}=u;return(0,F.jsx)(ee.QI,{value:u,children:(0,F.jsx)(H.$,{dateAdapter:K.h,children:(0,F.jsxs)(ee.lV,{autoComplete:"off",noValidate:!0,onSubmit:x,children:[(0,F.jsx)(V.A,{children:t?"Edit Event":"Add Event"}),(0,F.jsx)(W.A,{}),(0,F.jsx)(B.A,{sx:{p:2.5},children:(0,F.jsxs)(f.Ay,{container:!0,spacing:3,children:[(0,F.jsx)(f.Ay,{item:!0,xs:12,children:(0,F.jsxs)(j.A,{spacing:1,children:[(0,F.jsx)(G.A,{htmlFor:"cal-title",children:"Title"}),(0,F.jsx)(P.A,{fullWidth:!0,id:"cal-title",placeholder:"Title",...g("title"),error:Boolean(h.title&&m.title),helperText:h.title&&m.title})]})}),(0,F.jsx)(f.Ay,{item:!0,xs:12,children:(0,F.jsxs)(j.A,{spacing:1,children:[(0,F.jsx)(G.A,{htmlFor:"cal-description",children:"Description"}),(0,F.jsx)(P.A,{fullWidth:!0,id:"cal-description",multiline:!0,rows:3,placeholder:"Description",...g("description"),error:Boolean(h.description&&m.description),helperText:h.description&&m.description})]})}),(0,F.jsx)(f.Ay,{item:!0,xs:12,children:(0,F.jsx)(N.A,{control:(0,F.jsx)(Y.A,{checked:p.allDay,...g("allDay")}),label:"All day"})}),(0,F.jsxs)(f.Ay,{item:!0,xs:12,md:6,children:[(0,F.jsxs)(j.A,{spacing:1,children:[(0,F.jsx)(G.A,{htmlFor:"cal-start-date",children:"Start Date"}),(0,F.jsx)(J.E,{value:new Date(p.start),format:"dd/MM/yyyy hh:mm a",onChange:e=>y("start",e),slotProps:{textField:{InputProps:{endAdornment:(0,F.jsx)(_.A,{position:"end",sx:{cursor:"pointer"},children:(0,F.jsx)(ue.A,{})})}}}})]}),h.start&&m.start&&(0,F.jsx)(q.A,{error:!0,children:m.start})]}),(0,F.jsxs)(f.Ay,{item:!0,xs:12,md:6,children:[(0,F.jsxs)(j.A,{spacing:1,children:[(0,F.jsx)(G.A,{htmlFor:"cal-end-date",children:"End Date"}),(0,F.jsx)(J.E,{value:new Date(p.end),format:"dd/MM/yyyy hh:mm a",onChange:e=>y("end",e),slotProps:{textField:{InputProps:{endAdornment:(0,F.jsx)(_.A,{position:"end",sx:{cursor:"pointer"},children:(0,F.jsx)(ue.A,{})})}}}})]}),h.end&&m.end&&(0,F.jsx)(q.A,{error:!0,children:m.end})]}),(0,F.jsx)(f.Ay,{item:!0,xs:12,children:(0,F.jsxs)(f.Ay,{container:!0,spacing:2,children:[(0,F.jsx)(f.Ay,{item:!0,xs:12,children:(0,F.jsx)(b.A,{variant:"subtitle1",children:"Background Color"})}),(0,F.jsx)(f.Ay,{item:!0,xs:12,children:(0,F.jsx)(O.A,{children:(0,F.jsx)(Q.A,{row:!0,"aria-label":"color",...g("color"),onChange:e=>y("color",e.target.value),name:"color-radio-buttons-group",sx:{"& .MuiFormControlLabel-root":{mr:2}},children:s.map(((e,t)=>(0,F.jsx)(ie,{value:e.value,color:e.color},t)))})})})]})}),(0,F.jsx)(f.Ay,{item:!0,xs:12,children:(0,F.jsxs)(f.Ay,{container:!0,spacing:2,children:[(0,F.jsx)(f.Ay,{item:!0,xs:12,children:(0,F.jsx)(b.A,{variant:"subtitle1",children:"Text Color"})}),(0,F.jsx)(f.Ay,{item:!0,xs:12,children:(0,F.jsx)(O.A,{component:"fieldset",children:(0,F.jsx)(Q.A,{row:!0,"aria-label":"textColor",...g("textColor"),onChange:e=>y("textColor",e.target.value),name:"text-color-radio-buttons-group",sx:{"& .MuiFormControlLabel-root":{mr:2}},children:c.map(((e,t)=>(0,F.jsx)(ie,{value:e.value,color:e.color},t)))})})})]})})]})}),(0,F.jsx)(W.A,{}),(0,F.jsx)($.A,{sx:{p:2.5},children:(0,F.jsxs)(f.Ay,{container:!0,justifyContent:"space-between",alignItems:"center",children:[(0,F.jsx)(f.Ay,{item:!0,children:!l&&(0,F.jsx)(o.A,{title:"Delete Event",placement:"top",children:(0,F.jsx)(w.A,{onClick:async()=>{await async function(e){(0,le.Tk)(ce,(t=>{const r=t.events.filter((t=>t.id!==e));return{...t,events:r}}),!1)}(null===t||void 0===t?void 0:t.id),(0,ae.aN)({open:!0,message:"Event deleted successfully.",variant:"alert",alert:{color:"success"}}),i(!1)},size:"large",color:"error",children:(0,F.jsx)(pe.A,{})})})}),(0,F.jsx)(f.Ay,{item:!0,children:(0,F.jsxs)(j.A,{direction:"row",spacing:2,alignItems:"center",children:[(0,F.jsx)(A.A,{color:"error",onClick:n,children:"Cancel"}),(0,F.jsx)(A.A,{type:"submit",variant:"contained",disabled:v,children:t?"Edit":"Add"})]})})]})})]})})})};var xe=r(8750);const ve=()=>{const e=(0,i.A)((e=>e.breakpoints.down("sm"))),[t,r]=(0,n.useState)(!1),[v,g]=(0,n.useState)(),[f,A]=(0,n.useState)(),[j,b]=(0,n.useState)(new Date),[C,k]=(0,n.useState)(null),w=(0,n.useRef)(null),{events:D}=function(){const{data:e,isLoading:t,error:r,isValidating:i}=(0,le.Ay)(ce,se.GO,{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1});return(0,n.useMemo)((()=>({events:null===e||void 0===e?void 0:e.events,eventsLoading:t,eventsError:r,eventsValidating:i,eventsEmpty:!t&&!(null!==e&&void 0!==e&&e.length)})),[e,r,t,i])}();(0,n.useEffect)((()=>{const t=w.current;if(t){const r=t.getApi(),n=e?"listWeek":"dayGridMonth";r.changeView(n),A(n)}}),[e]);const E=async e=>{let{event:t}=e;await de(t.id,{allDay:t.allDay,start:t.start,end:t.end}),r(!0)},M=()=>{t&&g(null),r(!t)};return(0,F.jsxs)(a.A,{sx:{position:"relative"},children:[(0,F.jsxs)(y,{children:[(0,F.jsx)(L,{date:j,view:f,onClickNext:()=>{const e=w.current;if(e){const t=e.getApi();t.next(),b(t.getDate())}},onClickPrev:()=>{const e=w.current;if(e){const t=e.getApi();t.prev(),b(t.getDate())}},onClickToday:()=>{const e=w.current;if(e){const t=e.getApi();t.today(),b(t.getDate())}},onChangeView:e=>{const t=w.current;if(t){t.getApi().changeView(e),A(e)}}}),(0,F.jsx)(c.A,{weekends:!0,editable:!0,droppable:!0,selectable:!0,events:D,ref:w,rerenderDelay:10,initialDate:j,initialView:f,dayMaxEventRows:3,eventDisplay:"block",headerToolbar:!1,allDayMaintainDuration:!0,eventResizableFromStart:!0,select:e=>{const t=w.current;if(t){t.getApi().unselect()}k({start:e.start,end:e.end}),r(!0)},eventDrop:E,eventClick:e=>{var t;if(null!==e&&void 0!==e&&null!==(t=e.event)&&void 0!==t&&t.id){const t=D.find((t=>t.id===e.event.id));g(t)}r(!0)},eventResize:E,height:e?"auto":720,plugins:[u.A,p.A,h.A,m.A,d.Ay]})]}),(0,F.jsx)(l.A,{maxWidth:"sm",TransitionComponent:x.s,fullWidth:!0,onClose:M,open:t,sx:{"& .MuiDialog-paper":{p:0}},children:(0,F.jsx)(he,{modalCallback:e=>{e||g(null),r(e)},event:v,range:C,onCancel:M})}),(0,F.jsx)(o.A,{title:"Add New Event",children:(0,F.jsx)(s.A,{ariaLabel:"add-event-fab",sx:{display:"inline-flex",position:"sticky",bottom:24,left:"100%",transform:"translate(-50%, -50% )"},icon:(0,F.jsx)(xe.A,{style:{fontSize:"1.5rem"}}),onClick:M})})]})}}}]);